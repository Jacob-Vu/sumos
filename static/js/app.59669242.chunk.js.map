{"version":3,"sources":["utils/Extensions.ts","firebase/config.ts","models/TaskItem.ts","stores/TaskStore.ts","stores/SelectTaskStore.ts","stores/StorageStore.ts","stores/CommonStore.ts","stores/MoneyStore.ts","stores/RootStore.ts","components/ProgressBar.tsx","models/TransactionDetail.ts","components/EvalDetail.tsx","components/EvalResults.tsx","components/CommentList.tsx","components/TaskListItem.tsx","components/TodayTasks.tsx","components/KidReport.tsx","components/screens/HomeScreen.tsx","components/screens/LoginScreen.tsx","components/screens/TaskDetailScreen.tsx","components/screens/CameraScreen.tsx","components/screens/LoadingScreen.tsx","components/screens/MainStack.tsx","components/screens/ModelStack.tsx","App.tsx"],"names":["Date","prototype","format","mm","this","getMonth","dd","getDate","getFullYear","join","String","toDate","items","split","fire","auth","firebase","apps","length","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","storage","TaskItem","taskStore","id","task","cat","time","freqPerWeek","weekCount","attachments","comments","isSelected","isCompleted","toggleComplete","makeAutoObservable","action","TaskStore","taskList","periodUserList","loading","loadTaskList","user","dateSl","a","async","collection","doc","get","userDoc","weekFromDate","addDays","getDay","weekToDate","loadSelectedDate","weekTaskList","selectedTasks","find","x","date","seconds","toLocaleDateString","docPath","taskDoc","data","exists","workList","listTask","map","v","selectedItem","taskId","reduce","acc","dayTask","fromTask","runInAction","push","console","log","loadUserPeriod","userList","fromDate","userDataList","forEach","item","dataDate","selected","completed","filter","userDt","dataDates","dateSelects","where","saveSelectList","filterTasks","ref","url","mimeType","set","lastUpdate","migrate","orderBy","computed","SelectTaskStore","dateStr","selectDoc","doneDoc","newItems","doneTasks","includes","lastUpdated","observable","StorageStore","addAttachments","taskItem","cbAction","file","uri","fileContent","getPlatformPath","value","refName","getFileName","fileName","name","path","filePath","fetch","response","blob","child","put","getDownloadURL","fileAttach","type","Platform","OS","substring","indexOf","now","pop","select","android","web","ios","getPlatformURI","imagePath","imgSource","isNaN","state","CommonStore","role","email","userName","MoneyStore","balance","transToday","loadBalanceAndTrans","datetime","loadBalance","loadTrans","total","target","addTrans","transDetail","val","parseInt","users","startOfDay","endOfDay","trans","rootStore","selectTaskStore","storageStore","commonStore","moneyStore","storesContext","React","createContext","useStores","useContext","ProgressBar","props","bgcolor","fillerStyles","height","width","backgroundColor","textAlign","style","margin","padding","color","fontWeight","TransactionDetail","awardName","size","styles","StyleSheet","create","baseText","fontSize","titleText","awardValue","marginTop","fontStyle","borderWidth","borderBottomColor","borderBottomWidth","borderColor","input","maxWidth","marginLeft","EvalDetail","useState","commentValue","setCommentValue","setAwardValue","iconSize","setIconSize","getIconName","changeValue","delta","flexDirection","FontAwesome5","onPress","e","placeholder","toString","onChangeText","tranDetail","onSubmitTranDetail","submitTranDetail","observer","useEffect","tabIndex","toFixed","completedPercent","tran","renderAward","userRole","toJS","CommentList","cmt","i","key","text","transparent","FontAwesome","rightControl","minWidth","justifyContent","alignContent","alignSelf","wp","taskButton","flex","route","useNavigation","useRoute","showComment","setShowComment","cbAttachAction","View","TouchableWithoutFeedback","onSelectItem","len","attachItem","startsWith","Image","source","href","params","onValueChange","onDoneItem","position","DocumentPicker","result","onAddFile","showImagePicker","marginBottom","todayScreen","setDate","photo","sourceData","toggleSelect","SelectDay","ScrollView","sortedTaskList","totalSelected","totalCompleted","kidreport","Button","title","JSON","stringify","initializing","setInitializing","navigation","onAuthStateChanged","navigate","setTab","tabChanged","signOut","onChangeTab","heading","TodayTasks","index","container","alignItems","image","inputView","TextInput","forgot_button","loginBtn","LoginScreen","setEmail","password","setPassword","error","setError","Text","errorMessage","placeholderTextColor","secureTextEntry","TouchableOpacity","signInWithEmailAndPassword","then","catch","message","loginText","HelloWorldApp","camera","buttonContainer","button","ModalScreen","hasPermission","setHasPermission","Camera","Constants","Type","back","setType","setPhoto","setCamera","requestPermissionsAsync","status","goBack","sourceScreen","front","takePictureAsync","marginRight","LoadingScreen","setUser","MainStack","createStackNavigator","MainStackScreen","Navigator","headerMode","Screen","component","HomeScreen","CameraScreen","TaskDetailScreen","ModelStack","ModelStackScreen","LogBox","ignoreLogs","RootStack","Sentry","dsn","enableInExpoDevelopment","debug","TaskApp","NavigationContainer","mode"],"mappings":"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","file":"static/js/app.59669242.chunk.js","sourcesContent":["Date.prototype.format = function() {\r\n    var mm = this.getMonth() + 1; // getMonth() is zero-based\r\n    var dd = this.getDate();\r\n\r\n    return [(dd>9 ? \"\" : \"0\") + dd,(mm>9 ? \"\" : \"0\") + mm,this.getFullYear()\r\n           ].join(\"-\");\r\n};\r\n\r\nString.prototype.toDate = function() {\r\n    const items = this.split(\"-\");\r\n    return new Date(items[2],items[1] - 1,items[0]);\r\n};","import firebase from \"@firebase/app\";\r\nimport \"@firebase/auth\";\r\nimport \"@firebase/firestore\";\r\nimport \"@firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCZ1W91h5gI4Ys3K44apJMX-dfAzKmKOzc\",\r\n    authDomain: \"todo-app-594e8.firebaseapp.com\",\r\n    projectId: \"todo-app-594e8\",\r\n    storageBucket: \"todo-app-594e8.appspot.com\",\r\n    messagingSenderId: \"254618059037\",\r\n    appId: \"1:254618059037:web:2a162824c6e6dfd3d921f4\",\r\n    measurementId: \"G-84M73W8WLD\"\r\n};\r\n\r\nlet fire = null;\r\nif (!firebase.apps.length) {\r\n   fire = firebase.initializeApp(firebaseConfig);\r\n} else {\r\n   fire = firebase.app(); // if already initialized, use that one\r\n}\r\n\r\nexport const auth = fire.auth();\r\n\r\nexport const db = fire.firestore();\r\n\r\nexport const storage = fire.storage();\r\n\r\nexport default {fire};","import { observable, computed, action, makeAutoObservable } from \"mobx\";\r\nimport { TaskStore } from 'stores/TaskStore';\r\n\r\nexport default class TaskItem {\r\n    taskStore: TaskStore;\r\n    id;\r\n    cat;\r\n    freqPerWeek;\r\n    time;\r\n    task;\r\n    isSelected;\r\n    isCompleted;\r\n    weekCount;\r\n    attachments;\r\n    comments;\r\n\r\n    constructor(taskStore, id, task, cat, time, freqPerWeek,weekCount,attachments = [],comments = [],isSelected = false, isCompleted = false) {\r\n\t\tthis.taskStore = taskStore;\r\n\t\tthis.id = id;\r\n        this.task = task;\r\n        this.cat = cat;\r\n        this.time = time;\r\n\t\tthis.freqPerWeek = freqPerWeek;\r\n        this.weekCount = weekCount;\r\n        this.isSelected = isSelected;\r\n        this.isCompleted = isCompleted;\r\n        this.attachments = attachments;\r\n        this.comments = comments;\r\n        makeAutoObservable(this);\r\n\t}\r\n\r\n    @action toggleSelect = () => {\r\n        this.isSelected = !this.isSelected;\r\n    }\r\n\r\n    toggleComplete = () => {\r\n        this.isCompleted = !this.isCompleted;\r\n    }\r\n\r\n    static fromTask(taskStore,task,weekCount,attachments = [], comments = [],isSelected = false, isCompleted = false){\r\n        return new TaskItem(taskStore,task.id, task.task, task.cat, task.time, task.freqPerWeek, weekCount,attachments, comments, isSelected, isCompleted);\r\n    }\r\n}","import { addDays, format } from \"date-fns\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport { action, computed, makeAutoObservable, runInAction } from \"mobx\";\r\nimport { db, storage } from \"../firebase/config\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport \"../utils/Extensions\";\r\n\r\nclass TaskStore {\r\n  \r\n  taskList = [];\r\n  periodUserList = [];\r\n  loading = false;\r\n\r\n  constructor (){\r\n    console.log(\"Initialize TaskStore...\");\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  loadTaskList = async(user, dateSl) => {\r\n    this.loading = true;\r\n    const userDoc = await db.collection(\"todolist\").doc(\"default\").get();    \r\n\r\n    const weekFromDate = addDays(dateSl, dateSl.getDay() > 0? 1 -dateSl.getDay(): -6);\r\n    const weekToDate = addDays(dateSl, dateSl.getDay() > 0? 7 - dateSl.getDay(): 0);\r\n    const weekTaskList = await this.loadSelectedDate([user], weekFromDate, weekToDate);\r\n\r\n    let selectedTasks: [] = weekTaskList.find( x=> new Date(x.date.seconds*1000).toLocaleDateString() == dateSl.toLocaleDateString())?.selectedTasks;\r\n    if (!selectedTasks){\r\n      const docPath = `${user}_${format(dateSl, \"dd-MM-yyyy\")}`;\r\n      const taskDoc = await db.collection(\"selectlist\").doc(docPath).get();\r\n      selectedTasks = taskDoc.data()?.selectedTasks;\r\n    }\r\n\r\n    if (userDoc.exists && userDoc.data().workList) {\r\n      const listTask = userDoc.data().workList.map((v) => {\r\n        const selectedItem = selectedTasks?.find((x) => v.id == x.taskId);\r\n        const weekCount = weekTaskList.reduce((acc,dayTask) => {\r\n            if (dayTask.selectedTasks.find(x=> x.taskId == v.id)){\r\n                return acc += 1;\r\n            }\r\n            return acc;\r\n        },0);\r\n        return TaskItem.fromTask(\r\n          this,\r\n          v,\r\n          weekCount,\r\n          selectedItem?.attachments,\r\n          selectedItem?.comments,\r\n          selectedItem != null,\r\n          selectedItem?.isCompleted\r\n        );\r\n      });\r\n      runInAction(()=>{\r\n        this.taskList = [];\r\n        this.taskList.push(...listTask);\r\n        this.loading = false;\r\n      })\r\n    } else {\r\n      console.log(\"No doc values found\");\r\n    }\r\n  }\r\n\r\n  loadUserPeriod = async (userList, fromDate, toDate) => {\r\n    let userDataList = [];\r\n    this.loading = true;\r\n    const taskList = await this.loadSelectedDate(userList, fromDate, toDate);\r\n    taskList.forEach(item => {\r\n      let dataDate = {\r\n        date: format(new Date(item.date.seconds*1000),'dd-MM-yyyy'),\r\n        selected: item.selectedTasks.length,\r\n        completed: item.selectedTasks.filter( x=>x.isCompleted).length\r\n      };\r\n      const userDt = userDataList.find(x=> x.user == item.user);\r\n      if (!userDt){\r\n        userDataList.push({\r\n          user: item.user,\r\n          dataDates: [dataDate]\r\n        })\r\n      } else {\r\n        userDt.dataDates.push(dataDate);\r\n      }\r\n    });\r\n    runInAction(()=>{\r\n      this.loading = false;\r\n      this.periodUserList = userDataList;\r\n    })\r\n  }\r\n\r\n  loadSelectedDate = async (userList, fromDate, toDate) => {\r\n    const dateSelects = [];\r\n    const querySnapshot = await db.collection(\"selectlist\")\r\n      .where(\"user\", \"in\", userList)\r\n      .where(\"date\", \">=\", fromDate)\r\n      .where(\"date\", \"<=\", toDate)\r\n      .get();\r\n    querySnapshot.forEach((doc) => {\r\n      dateSelects.push(doc.data());\r\n    });\r\n    return dateSelects;\r\n  }\r\n\r\n  saveSelectList = async (user, dateSl) => {\r\n    this.loading = true;\r\n    const docPath = `${user}_${format(dateSl, \"dd-MM-yyyy\")}`;\r\n    const filterTasks = this.taskList\r\n      .filter((x) => x.isSelected)\r\n      .map((task) => ({\r\n        taskId: task.id,\r\n        isCompleted: task.isCompleted,\r\n        comments: task.comments,\r\n        attachments: task.attachments?.map(x=> ({\r\n          ref: x.ref,\r\n          url: x?.url,\r\n          mimeType: x?.mimeType\r\n        }))\r\n      }));\r\n    await db.collection(\"selectlist\").doc(docPath).set({\r\n      date: dateSl,\r\n      lastUpdate: new Date(),\r\n      user,\r\n      selectedTasks: filterTasks,\r\n    });\r\n    runInAction(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  @computed get sortedTaskList() {\r\n    return orderBy(this.taskList, [\"isSelected\", \"id\"], [\"desc\", \"asc\"]);\r\n  }\r\n\r\n  // can be called as `this.total`\r\n  @computed get totalCompleted() {\r\n    return this.taskList.filter((x) => x.isCompleted).length;\r\n  }\r\n\r\n  // can be called as `this.total`\r\n  @computed get totalSelected() {\r\n    return this.taskList.filter((x) => x.isSelected).length;\r\n  }\r\n\r\n  @action saveSelectTask(id) {\r\n\r\n  }\r\n\r\n  migrate = async() => {\r\n    db.collection(\"todolist\")\r\n      .doc(\"default\");\r\n  }\r\n}\r\n\r\nexport default TaskStore;\r\n","import { observable } from \"mobx\";\r\nimport { db } from \"../firebase/config\";\r\nimport \"../utils/Extensions\";\r\n\r\nclass SelectTaskStore {\r\n    @observable selectedTasks = [];\r\n\r\n    async migrateData(user,date){\r\n        const dateStr = date.format();\r\n        const selectDoc = await db.collection(\"selectlist\" + user).doc(dateStr).get();\r\n        const doneDoc = await db.collection(\"donelist\" + user).doc(dateStr).get();\r\n        let newItems = [];\r\n        let doneTasks  = [];\r\n        const docPath = `${user}_${dateStr}`;\r\n        if (doneDoc.exists && doneDoc.data().doneTasks) {\r\n            doneDoc.data().doneTasks.forEach(taskId => {\r\n              doneTasks.push(taskId);\r\n            });\r\n          }\r\n        if (selectDoc.exists && selectDoc.data().selectedTasks) {\r\n            selectDoc.data().selectedTasks.forEach(taskId => {\r\n                newItems.push({\r\n                    id: `${docPath}_${taskId}`,\r\n                    taskId: taskId,\r\n                    date: date,\r\n                    user,\r\n                    isCompleted: doneTasks.includes(taskId),\r\n                    attachments: []\r\n                });\r\n            });\r\n        }\r\n        db.collection(\"selectlist\").doc(docPath).set({\r\n            lastUpdated: new Date(),\r\n            selectedTasks: newItems\r\n        });\r\n    }\r\n}\r\n\r\nexport default SelectTaskStore;","import { addDays, format } from \"date-fns\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport { action, computed, makeAutoObservable, runInAction } from \"mobx\";\r\nimport { Platform } from \"react-native\";\r\nimport { db, storage } from \"../firebase/config\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport \"../utils/Extensions\";\r\n\r\nclass StorageStore {\r\n\r\n  loading = false;  \r\n\r\n  constructor () {\r\n    console.log(\"Initialize TaskStore...\");\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  addAttachments = async(taskItem,{file, uri},cbAction) => {\r\n    this.loading = true;\r\n    let fileContent = this.getPlatformPath({uri}).value;\r\n    let refName = this.getFileName(file?.fileName || file?.name,file?.path);\r\n    // refName is usef for the Google so it should be unique\r\n\r\n    const filePath = \"attachFiles/\" + refName;\r\n    runInAction( async()=> {\r\n      this.loading = false;\r\n      const response = await fetch(fileContent);\r\n      const blob = await response.blob();\r\n      \r\n      const ref = storage.ref().child(filePath);\r\n      const taskUpload = await ref.put(blob);\r\n\r\n      const url = await ref.getDownloadURL();\r\n      console.log(url);\r\n      const fileAttach = {ref: filePath, url: url, mimeType: file?.type};\r\n      taskItem.attachments.push(fileAttach);\r\n      if (cbAction) cbAction();\r\n    })\r\n  }\r\n\r\n  getFileName = (name, path) => {\r\n    if (Platform.OS === \"ios\") {\r\n        path = \"~\" + path.substring(path.indexOf(\"/Documents\"));\r\n    }\r\n    if (Platform.OS == \"web\") {\r\n      const date = new Date();\r\n      return format(date, \"yyMMdd\") + \"/\" + Date.now() + \"_\" + name ;\r\n    }\r\n    return format(date, \"yyMMdd\") + \"/\" + path.split(\"/\").pop()  + \"_\" + name;\r\n  }\r\n\r\n  /**\r\n   * Get platform specific value from response\r\n   */\r\n  getPlatformPath = ({ path, uri }) => {\r\n      return Platform.select({\r\n          android: {value: path },\r\n          web: {value: uri},\r\n          ios: {value: uri }\r\n      });\r\n  }\r\n\r\n  getPlatformURI = (imagePath) => {\r\n      let imgSource = imagePath;\r\n      if (isNaN(imagePath)) {\r\n          imgSource = { uri: this.state.imagePath };\r\n          if (Platform.OS == \"android\") {\r\n              imgSource.uri = \"file:///\" + imgSource.uri;\r\n          }\r\n      }\r\n      return imgSource;\r\n  }\r\n\r\n}\r\n\r\nexport default StorageStore;\r\n","import { computed, makeAutoObservable } from \"mobx\";\r\n\r\nclass CommonStore {\r\n  \r\n  user = null;\r\n\r\n  userList = [{role: 'child',name: 'Susu', email: 'tulamuaban@gmail.com'},{role: 'child', name: 'Nemo', email: 'dragon.tvq@gmail.com'},{role: 'admin', name: 'Dad', email: 'quyetvv@gmail.com'}]\r\n\r\n  constructor (){\r\n    console.log(\"Initialize CommonStore...\");\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  @computed get userName() {    \r\n    return this.userList.find(x=> x.email == this.user?.email)?.name;\r\n  }\r\n\r\n  @computed get userRole() {\r\n    return this.userList.find(x=> x.email == this.user?.email)?.role;\r\n  }\r\n\r\n  @computed get otherName() {\r\n    return this.userList.find(x=> x.name !== this.userName && x.name != 'Dad')?.name;\r\n  }\r\n\r\n}\r\n\r\nexport default CommonStore;\r\n","import { endOfDay, format } from \"date-fns\";\r\nimport startOfDay from \"date-fns/startOfDay\";\r\nimport { computed, makeAutoObservable, runInAction } from 'mobx';\r\nimport { db, storage } from \"../firebase/config\";\r\nimport TransactionDetail from '../models/TransactionDetail';\r\n\r\nclass MoneyStore {  \r\n\r\n  loading: boolean = true;\r\n  balance = null;\r\n  transToday: [TransactionDetail] = [];\r\n\r\n  constructor (){\r\n    console.log(\"Initialize CommonStore...\");\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  loadBalanceAndTrans = async(user,datetime) => {\r\n    await this.loadBalance(user);\r\n    await this.loadTrans([user],datetime);\r\n  }\r\n\r\n  loadBalance = async (user) => {\r\n    this.loading = true;\r\n    const userDoc = await db.collection(\"money\").doc(`${user}_balance`).get();\r\n    if (userDoc.exists){\r\n      runInAction(()=>{\r\n        this.balance = userDoc.data();\r\n      })\r\n    } else {\r\n      this.balance = {\r\n        total: 0,\r\n        lastUpdate: new Date(),\r\n        target: 20000000\r\n      };\r\n      await db.collection(\"money\").doc(`${user}_balance`).set(this.balance);\r\n    }\r\n    runInAction(()=>{\r\n      this.loading = false;\r\n    })\r\n  }\r\n\r\n  @computed get completedPercent(){\r\n    return this.balance.total/this.balance.target*100;\r\n  }\r\n\r\n  addTrans = async (user,transDetail: TransactionDetail) => {\r\n    this.loading = true;\r\n    const date = format(transDetail.datetime, \"dd-MM-yyyy\");\r\n\r\n    // save transaction\r\n    // commit to balance\r\n    const val = parseInt(transDetail.value);\r\n    this.balance.total += isNaN(val) ? 0: val;\r\n    transDetail.total = this.balance.total;\r\n\r\n    await db.collection(\"money\").doc(`${user}_${date}_${transDetail.id}`).set(transDetail);\r\n\r\n    await db.collection(\"money\").doc(`${user}_balance`).set({\r\n      total: this.balance.total,\r\n      lastUpdate: new Date(),\r\n      target: this.balance.target?? 20000000\r\n    });\r\n\r\n    runInAction(()=>{\r\n      this.transToday.push(transDetail);\r\n      this.loading = false;\r\n    })\r\n  }\r\n\r\n  loadTrans = async (users,datetime) => {\r\n    this.loading = true;\r\n    this.transToday = [];\r\n\r\n    const fromDate = startOfDay(datetime);\r\n    const toDate = endOfDay(datetime);\r\n    const moneyTrans = await db.collection(\"money\")\r\n      .where(\"user\", \"in\", users)\r\n      .where(\"datetime\", \">=\", fromDate)\r\n      .where(\"datetime\", \"<=\", toDate).get();\r\n      moneyTrans.forEach(trans => {\r\n        this.transToday.push(trans.data());\r\n      });\r\n      runInAction(()=>{\r\n        this.loading = false;\r\n      })\r\n  }\r\n\r\n}\r\n\r\nexport default MoneyStore;\r\n","import React from 'react';\r\nimport TaskStore from './TaskStore';\r\nimport SelectTaskStore from './SelectTaskStore';\r\nimport StorageStore from './StorageStore';\r\nimport CommonStore from './CommonStore';\r\nimport MoneyStore from './MoneyStore';\r\n\r\nclass RootStore {\r\n    taskStore: TaskStore;\r\n    selectTaskStore: ReportTaskStore;\r\n    storageStore: StorageStore;\r\n    commonStore: CommonStore;\r\n    moneyStore: MoneyStore;\r\n    constructor() {\r\n        this.taskStore = new TaskStore(this);\r\n        this.selectTaskStore = new SelectTaskStore(this);\r\n        this.storageStore = new StorageStore(this);\r\n        this.commonStore = new CommonStore(this);\r\n        this.moneyStore = new MoneyStore(this);\r\n    }\r\n}\r\n\r\nconst rootStore = new RootStore();\r\n\r\nexport default rootStore;\r\n\r\nconst storesContext = React.createContext({ ...rootStore });\r\nexport const useStores = () => React.useContext(storesContext);\r\n\r\n","\r\nimport { View } from \"native-base\";\r\nimport { Text } from \"native-base\";\r\nimport React from \"react\";\r\n\r\n\r\nconst ProgressBar = (props) => {\r\n  const { bgcolor, completed } = props;\r\n\r\n  const containerStyles = {\r\n    height: 20,\r\n    width: \"95%\",\r\n    backgroundColor: \"#e0e0de\",\r\n    margin: 30\r\n  }\r\n\r\n  const fillerStyles = {\r\n    height: \"100%\",\r\n    width: `${completed}%`,\r\n    backgroundColor: bgcolor,\r\n    textAlign: \"right\"\r\n  }\r\n\r\n  const labelStyles = {\r\n    padding: 5,\r\n    color: \"white\",\r\n    fontWeight: \"bold\"\r\n  }\r\n\r\n  return (\r\n    <View style={containerStyles}>\r\n      <View style={fillerStyles}>\r\n        <View style={labelStyles}><Text>{`${completed}%`}</Text></View>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;","import { observable, computed, action, makeAutoObservable } from \"mobx\";\r\nimport { TaskStore } from 'stores/TaskStore';\r\n\r\nexport default class TransactionDetail {\r\n    id;\r\n    awardName;\r\n    size;\r\n    type;\r\n    value: Number;\r\n    total: Number;\r\n    datetime;\r\n    user;\r\n    attachments;\r\n    comments;\r\n\r\n    constructor(id, awardName, size, type, value, total, datetime, user, attachments = [],comments = []) {\r\n\t\tthis.id = id;\r\n        this.awardName= awardName;\r\n        this.size = size;\r\n        this.value = value;\r\n        this.total = total;\r\n        this.type = type;\r\n        this.datetime = datetime;\r\n        this.user = user;\r\n        this.attachments = attachments;\r\n        this.comments = comments;\r\n        makeAutoObservable(this);\r\n\t}\r\n}","import { FontAwesome, FontAwesome5 } from \"@expo/vector-icons\";\r\nimport { Button, View } from \"native-base\";\r\nimport { Text } from \"native-base\";\r\nimport React, { useState } from \"react\";\r\nimport { StyleSheet } from \"react-native\";\r\nimport { TextInput } from \"react-native-gesture-handler\";\r\nimport TransactionDetail from \"../models/TransactionDetail\";\r\n\r\n\r\nconst EvalDetail = (props) => {\r\n\r\n    const MinAwardValue = 10000;\r\n    const [commentValue, setCommentValue] = useState(\"\");\r\n    const [awardValue, setAwardValue] = useState(10000);\r\n    const [iconSize, setIconSize] = useState(30);\r\n\r\n    const submitTranDetail = () => {\r\n      const tranDetail: TransactionDetail = new TransactionDetail(Date.now(), getIconName(),iconSize,\"Award\",awardValue,0,props.date,props.user, [],[commentValue]);\r\n      if (props.onSubmitTranDetail) {\r\n        props.onSubmitTranDetail(tranDetail);\r\n      }\r\n    };\r\n\r\n    const getIconName = () => {\r\n      let icon = \"\";\r\n      if (awardValue > 0) {\r\n        icon = awardValue  <= 10000? \"star\": (awardValue > 10000 && awardValue < 40000 ? \"heart\": \"medal\");\r\n      } else {\r\n        icon = awardValue  >= -10000? \"surprise\": (awardValue < -10000 && awardValue > -40000? \"sad-cry\": \"angry\")\r\n      }\r\n      return icon;\r\n    };\r\n\r\n    const changeValue = (delta) => {\r\n        if (awardValue == MinAwardValue && delta < 0) {\r\n          setAwardValue(-10000);\r\n        }\r\n        else if (awardValue == -MinAwardValue && delta > 0) {\r\n          setAwardValue(10000);\r\n        } else {\r\n          if (awardValue > 0 ) {\r\n            setIconSize(iconSize + delta);\r\n          } else {\r\n            setIconSize(iconSize - delta);\r\n          }\r\n\r\n          // tng tc tin thng 5 ln\r\n          if (awardValue >= 50000 || awardValue <= -50000) {\r\n            delta = delta * 5;\r\n          }\r\n          setAwardValue(parseInt(awardValue) + delta * 1000);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <View style={{ flexDirection: \"column\" }}>\r\n            <View style={{flexDirection: \"row\"}}>\r\n              <FontAwesome5 name={getIconName()} style={{fontSize:iconSize, marginLeft: 20}} color={awardValue > 0 ? \"rgb(63, 81, 181)\": \"#786d6c\"} />              \r\n              <FontAwesome5 name=\"plus\" style={{fontSize: 24 ,marginLeft: 30}} onPress={e => changeValue(10)} />\r\n              <FontAwesome5 name=\"minus\" style={{fontSize: 24, marginLeft: 10}} onPress={e => changeValue(-10)} />\r\n              <TextInput style={styles.awardValue} placeholder=\"Gi tr thng\" value={awardValue.toString()} onChangeText={setAwardValue} ></TextInput>\r\n            </View>            \r\n            <TextInput style={styles.input} placeholder=\"Thm nhn xt...\" value={commentValue} onChangeText={setCommentValue} ></TextInput>\r\n            <Button style={{margin: 10}} onPress={() => submitTranDetail()}>\r\n                <Text style={{fontSize:16}} > Xc nhn </Text>\r\n            </Button>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  baseText: {\r\n    fontSize: 11,\r\n  },\r\n  titleText: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\"\r\n  },\r\n  awardValue: {\r\n    margin: 20,\r\n    height: 20,\r\n    marginTop: 0,\r\n    fontSize: 16,\r\n    fontStyle: \"italic\",\r\n    borderWidth: 0,\r\n    borderBottomColor: \"#000000\",\r\n    borderBottomWidth: 1,\r\n    borderColor: \"rgb(201, 201, 201)\"\r\n  },\r\n  input: {\r\n    height: 40,\r\n    width: 300,\r\n    maxWidth: 500,\r\n    marginLeft: 20,\r\n    fontSize: 16,\r\n    fontStyle: \"italic\",\r\n    borderWidth: 0,\r\n    borderBottomColor: \"#000000\",\r\n    borderBottomWidth: 1,\r\n    borderColor: \"rgb(201, 201, 201)\"\r\n  }\r\n});\r\n\r\nexport default EvalDetail;","import { FontAwesome5 } from '@expo/vector-icons';\r\nimport { format } from \"date-fns\";\r\nimport { Button, List, ListItem, Spinner, View } from \"native-base\";\r\nimport { Text } from \"native-base\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { StyleSheet } from \"react-native\";\r\nimport { TextInput } from 'react-native-gesture-handler';\r\nimport { useStores } from \"../stores/RootStore\";\r\nimport TransactionDetail from '../models/TransactionDetail';\r\nimport ProgressBar from './ProgressBar';\r\nimport EvalDetail from './EvalDetail';\r\nimport { toJS } from 'mobx';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nconst EvalResults = (props) => {\r\n    \r\n    const {commonStore, moneyStore} = useStores();\r\n\r\n    useEffect(()=>{\r\n        moneyStore.loadBalanceAndTrans(props.user,props.date);\r\n    },[props.user,props.date, props.tabIndex]);\r\n\r\n    const submitTranDetail = (transDetail: TransactionDetail) => {\r\n        moneyStore.addTrans(props.user,toJS(transDetail));\r\n    }\r\n\r\n    const renderAward = (tran: TransactionDetail) => {\r\n        return (\r\n            <View style={{flexDirection: 'column', margin: 10}}>\r\n                <FontAwesome5 name={tran.awardName} style={{fontSize:tran.size}} color={tran.value > 0 ? \"red\": \"#786d6c\"} />\r\n                <Text> {(tran.value/1000).toFixed(0)}k </Text>\r\n                { tran.comments.length > 0 && tran.comments[0] != \"\" &&\r\n                  <Text style={{ marginTop:10, fontStyle: \"italic\", color: \"#3962a3\"}}> {format(new Date(tran.datetime*1000),'HH:mm')}: {tran.comments[0]}</Text>\r\n                }\r\n            </View>\r\n        )\r\n    }\r\n\r\n    return moneyStore.loading && !moneyStore.balance ? (<Spinner color=\"green\" />) : (\r\n        <View style={{ flexDirection: \"column\", width: \"100%\"}}>\r\n          <View style={{}}>\r\n              <Text style={{color: \"#1d4d99\"}}> Total balance: {(moneyStore.balance.total/1000).toFixed(0)}k/{(moneyStore.balance.target/1000).toFixed(0)}k</Text>\r\n              <ProgressBar bgcolor={'#eb4034'} completed={moneyStore.completedPercent.toFixed(2)} ></ProgressBar>\r\n          </View>\r\n          <View>\r\n            <Text style={{color: \"#1d4d99\"}}> Results: </Text>\r\n            <View style={{flexDirection: \"column\"}}>\r\n            {\r\n                moneyStore.transToday.map((tran) => (\r\n                    renderAward(tran)\r\n                ))\r\n            }\r\n            </View>\r\n          </View>\r\n          {commonStore.userRole == 'admin' &&\r\n            <View style={{flexDirection: \"row\", marginTop: 20}}>\r\n                <Text style={{color: \"#1d4d99\"}}> Evaluation: </Text>\r\n                <EvalDetail user={props.user} date={props.date} onSubmitTranDetail={submitTranDetail}></EvalDetail>\r\n            </View>\r\n          }\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  baseText: {\r\n    fontSize: 11,\r\n  },\r\n  titleText: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\"\r\n  },\r\n  input: {\r\n    height: 40,\r\n    width: 300,\r\n    maxWidth: 500,\r\n    marginLeft: 20,\r\n    fontSize: 16,\r\n    fontStyle: \"italic\",\r\n    borderWidth: 0,\r\n    borderBottomColor: '#000000',\r\n    borderBottomWidth: 1,\r\n    borderColor: \"rgb(201, 201, 201)\"\r\n  }\r\n});\r\n\r\nexport default observer(EvalResults);","import { useNavigation, useRoute, useIsFocused  } from \"@react-navigation/native\";\r\nimport { useStores } from \"../stores/RootStore\";\r\nimport TaskItem from '../models/TaskItem';\r\nimport { FontAwesome } from '@expo/vector-icons';\r\nimport { TextInput } from 'react-native-gesture-handler';\r\nimport React, { useState } from \"react\";\r\nimport { Button, View } from \"native-base\";\r\nimport { Text } from \"native-base\";\r\nimport { StyleSheet } from \"react-native\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst CommentList = (props) => {\r\n    \r\n    const [commentValue, setCommentValue] = useState(\"\");\r\n    const {taskStore, storageStore, commonStore} = useStores();\r\n\r\n    const taskItem: TaskItem = props.item;\r\n\r\n    const addComment = () => {\r\n      taskItem.comments.push({id: Date.now(), text: commonStore.userName + ':' + commentValue});\r\n      setCommentValue(\"\");\r\n      taskStore.saveSelectList(props.user,props.date);\r\n    };\r\n\r\n    return (\r\n        <View style={{ width: 400, marginLeft: 20, marginTop: 20, borderWidth: 1, borderColor: \"rgb(201, 201, 201)\" }}>\r\n          {\r\n              taskItem.comments?.map((cmt,i) => (\r\n                  <Text style={{ fontStyle: \"italic\", color: i % 2 == 0? \"#3962a3\": \"#39a372\" }} key={cmt.id}> {format(new Date(cmt.id),'HH:mm')}: {cmt.text}</Text>\r\n              ))\r\n          }\r\n          <View style={{flexDirection: \"row\", marginTop: 20}}>\r\n            <TextInput style={styles.input} placeholder=\"Write to here...\" value={commentValue} onChangeText={setCommentValue} ></TextInput>\r\n            <Button style={{marginLeft: 10}} transparent onPress={() => addComment()}>\r\n            <FontAwesome name=\"send-o\" style={{fontSize:25}} color=\"rgb(63, 81, 181)\" />\r\n            </Button>\r\n          </View>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  baseText: {\r\n    fontSize: 11,\r\n  },\r\n  titleText: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\"\r\n  },\r\n  input: {\r\n    height: 40,\r\n    width: 300,\r\n    maxWidth: 500,\r\n    marginLeft: 20,\r\n    fontSize: 16,\r\n    fontStyle: \"italic\",\r\n    borderWidth: 0,\r\n    borderBottomColor: '#000000',\r\n    borderBottomWidth: 1,\r\n    borderColor: \"rgb(201, 201, 201)\"\r\n  }\r\n});\r\n\r\nexport default CommentList;","import { Body, Button, ListItem, Right, Switch, Spinner, } from 'native-base';\r\nimport { Text } from \"native-base\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Image, Linking, Platform, StyleSheet, TouchableWithoutFeedback, View } from \"react-native\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport * as DocumentPicker from \"expo-document-picker\";\r\nimport { useNavigation, useRoute, useIsFocused  } from \"@react-navigation/native\";\r\nimport { useStores } from \"../stores/RootStore\";\r\nimport TaskItem from '../models/TaskItem';\r\nimport { FontAwesome } from '@expo/vector-icons';\r\nimport { TextInput } from 'react-native-gesture-handler';\r\nimport CommentList from './CommentList';\r\nimport {widthPercentageToDP as wp, heightPercentageToDP as hp} from 'react-native-responsive-screen';\r\n\r\nconst TaskListItem = (props) => {\r\n  const taskItem: TaskItem = props.taskItem;\r\n  const navigation = useNavigation();\r\n  const route = useRoute();\r\n  const {taskStore, storageStore} = useStores();\r\n\r\n  const [showComment, setShowComment] = useState(false);\r\n\r\n  const cbAttachAction = ()=> {\r\n    taskStore.saveSelectList(props.user,props.date);\r\n  }\r\n\r\n  const showImagePicker = async (taskItem) => {\r\n    // ask the user for the permission to access the media library\r\n    // const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();    \r\n\r\n    // if (permissionResult.granted === false) {\r\n    //   alert(\"You've refused to allow this appp to access your photos!\");\r\n    //   return;\r\n    // }\r\n\r\n    // const result = await ImagePicker.launchImageLibraryAsync();\r\n\r\n    const result = await DocumentPicker.getDocumentAsync();\r\n\r\n    if (!result.file) {\r\n      console.log(\"User cancelled image picker\");\r\n    } else {\r\n      storageStore.addAttachments(taskItem, result, cbAttachAction);\r\n      if (props.onAddFile){\r\n        props.onAddFile();\r\n      }\r\n    }\r\n  };\r\n  \r\n  \r\n  const takePicture = (taskItem) => {\r\n    navigation.navigate(\"CameraScreen\",{ sourceScreen: \"HomeScreen\", sourceData: {id: taskItem.id, user: props.user, taskItem: taskItem } });\r\n  };\r\n  const attachments = (taskItem) => {\r\n    if (taskItem.attachments.len === 0)\r\n      return (<></>);\r\n    return (<View style={{flexDirection: \"row\"}}>\r\n      {\r\n        taskItem.attachments.map(attachItem => {\r\n            if (attachItem.mimeType && attachItem.mimeType.startsWith(\"image/\")) {\r\n              return (<Image key={attachItem.url} source={{uri: attachItem.value?? attachItem.url}} style={{width: 50,height: 50, marginLeft: 20}}></Image>)\r\n            } else {\r\n              return (<a key={attachItem.url} href={attachItem.url} style={{width: 50,height: 50, marginLeft: 20}}></a>)\r\n            }\r\n        })\r\n      }\r\n      </View>);    \r\n  };\r\n\r\n  return (\r\n    <ListItem key={taskItem.id} style={{ backgroundColor: taskItem.isSelected? \"#cde1f9\": \"#fcfcfc\"}}>\r\n      <Body style={{flexDirection: \"column\"}}>\r\n        <View style={{flexDirection: \"row\"}}>\r\n          <View>\r\n            <TouchableWithoutFeedback onPress={() => props.onSelectItem(taskItem)}>\r\n              <View>\r\n                <Text style={styles.titleText}>{taskItem.id}. {taskItem.task}</Text>\r\n                <Text style={styles.baseText}>Mc: {taskItem.cat} </Text>\r\n                { taskItem.weekCount > 0 ?\r\n                <Text style={{fontSize: 13,color: taskItem.weekCount > taskItem.freqPerWeek? \"red\": \"\"}}> chn: {taskItem.weekCount} ln\r\n                  (c chn {taskItem.freqPerWeek} ln) </Text>\r\n                : <Text style={{fontSize: 13}}>c chn {taskItem.freqPerWeek} ln </Text> }\r\n                {\r\n                  attachments(taskItem)\r\n                }\r\n                {\r\n                  storageStore.loading && route.params?.id == taskItem.id && <View><Spinner/><Text>ang ti ln cloud... </Text></View>\r\n                }\r\n              </View>\r\n            </TouchableWithoutFeedback>\r\n          </View>\r\n        </View>\r\n        <View>\r\n          {\r\n            showComment && <CommentList item={taskItem} user={props.user} date={props.date}></CommentList>\r\n          }\r\n        </View>\r\n      </Body>\r\n      { taskItem.isSelected &&\r\n      <Right style={styles.rightControl}>\r\n          <View style={styles.taskButton}>\r\n            <Switch value={taskItem.isCompleted} onValueChange={(e)=> { props.onDoneItem(taskItem);}}  />\r\n          </View>\r\n          <Button style={styles.taskButton} transparent onPress={() => setShowComment(!showComment)}>\r\n              <FontAwesome name=\"comment\" style={{fontSize:25}} color={taskItem.comments.length > 0 ? \"red\": \"rgb(63, 81, 181)\"} />\r\n              { taskItem.comments.length > 0 && <Text style={{fontSize:14, fontWeight: \"bold\", color: \"white\", position: \"absolute\"}}>{taskItem.comments.length}</Text>}\r\n          </Button>\r\n          {/* <Button style={styles.taskButton} transparent onPress={() => takePicture(taskItem)} >\r\n              <FontAwesome style={{fontSize:25}} name=\"camera\" color=\"rgb(63, 81, 181)\" />\r\n          </Button> */}\r\n          <Button style={styles.taskButton} transparent onPress={() => showImagePicker(taskItem)}>\r\n              <FontAwesome style={{fontSize:25}} name=\"cloud-upload\" color=\"rgb(63, 81, 181)\" />\r\n          </Button>\r\n      </Right>\r\n      }\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  rightControl: {\r\n    width:120,\r\n    minWidth: 120,\r\n    maxWidth:200,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-evenly\",\r\n    alignContent: \"flex-start\",\r\n    alignSelf: \"flex-start\"\r\n  },\r\n  baseText: {\r\n    fontSize: 11,\r\n  },\r\n  titleText: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\",\r\n    width: 500,\r\n    maxWidth: wp(\"50%\")\r\n  },\r\n  input: {\r\n    height: 40,\r\n    maxWidth: 500,\r\n    marginLeft: 20,\r\n    fontSize: 18,\r\n    borderWidth: 1,\r\n    borderColor: \"rgb(201, 201, 201)\"\r\n  },\r\n  taskButton: {\r\n    flex: 1,\r\n    justifyContent: \"space-around\",\r\n    alignContent: \"center\",\r\n    alignSelf: \"center\"\r\n  }\r\n});\r\n\r\n\r\nconst taskList = observer(TaskListItem);\r\nexport default taskList;","import { FontAwesome } from \"@expo/vector-icons\";\r\nimport { useRoute } from \"@react-navigation/native\";\r\nimport { addDays, format } from \"date-fns\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Body, Button, Card, CardItem, List, Spinner } from \"native-base\";\r\nimport { Text } from \"native-base\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { ScrollView, StyleSheet, View } from \"react-native\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport { useStores } from \"../stores/RootStore\";\r\nimport EvalResults from \"./EvalResults\";\r\nimport TaskListItem from \"./TaskListItem\";\r\n\r\n\r\nconst TodayTasksScreen = (props) => {\r\n  const [dateSl,setDate] = useState(new Date());  \r\n  const {taskStore, commonStore, storageStore} = useStores();\r\n  const route = useRoute();\r\n  \r\n  useEffect(()=> {\r\n    taskStore.loadTaskList(props.user,dateSl);\r\n  },[props.tabIndex, props.user,dateSl]);\r\n\r\n  const cbAttachAction = ()=> {\r\n    taskStore.saveSelectList(props.user,dateSl);\r\n  }\r\n  useEffect(() => {\r\n    if (route.params?.photo &&  route.params.sourceData?.user == props.user) {\r\n      storageStore.addAttachments(route.params.sourceData?.taskItem, route.params.photo, cbAttachAction);\r\n    }\r\n  }, [route.params?.photo]);\r\n\r\n  const onSelectItem = (task: TaskItem) => {\r\n    task.toggleSelect();\r\n    taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const onDoneItem = (task: TaskItem) => {\r\n    task.toggleComplete();\r\n    taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const onAddFile = (e) => {\r\n  };\r\n\r\n  const SelectDay = (val) => {\r\n    setDate(addDays(dateSl, val));\r\n  };\r\n\r\n  return (\r\n     <ScrollView>\r\n        <View style={{flexDirection: \"column\"}}>\r\n          <View style={{flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 20, marginBottom: 20 }}>\r\n              <Button transparent onPress={()=> SelectDay(-1)}>\r\n                <FontAwesome style={{fontSize:35}} name=\"backward\" color=\"rgb(33, 150, 243)\" />\r\n             </Button>\r\n             <View style={{flexDirection: \"row\", justifyContent: 'center'}}>\r\n              <Text style={{fontSize: 18,fontWeight: \"bold\", color: \"red\"}} > {format(dateSl,\"iiii, dd-MM-yyyy\")} </Text>\r\n              {taskStore.loading && <Spinner style={{height: 35}}/>}\r\n             </View>\r\n             <Button transparent onPress={()=> SelectDay(1)}>\r\n              <FontAwesome style={{fontSize:35}} name=\"forward\" color=\"rgb(33, 150, 243)\" />\r\n             </Button>\r\n          </View>\r\n        </View>\r\n        <Card>\r\n            <CardItem>\r\n              <Body>\r\n                <EvalResults user={props.user} date={dateSl} tabIndex={props.tabIndex}></EvalResults>\r\n              </Body>\r\n            </CardItem>\r\n        </Card>        \r\n        {taskStore.sortedTaskList.length > 0 &&\r\n        (\r\n          <View style={{flexDirection: \"column\"}}>\r\n            <Text style={styles.result} >\r\n              {props.user}  chn {taskStore.totalSelected} vic. {\"\\r\\n\"} hon thnh: {taskStore.totalCompleted} vic</Text>\r\n            <Text style={{ fontSize: 18, fontWeight: \"bold\", marginLeft: 15, marginBottom: 20}}>Danh sch cng vic: </Text>\r\n            <List>\r\n            {\r\n              taskStore.sortedTaskList.map((taskItem, i) => (\r\n                <TaskListItem key={taskItem.id} taskItem={taskItem} date={dateSl} onSelectItem={onSelectItem} onDoneItem={onDoneItem} onAddFile={onAddFile} {...props} />\r\n              ))\r\n            }\r\n            </List>\r\n          </View>\r\n        )}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({  \r\n  result: {\r\n    marginLeft: 10,\r\n    marginBottom: 20,\r\n    fontSize: 22,\r\n    fontWeight: \"bold\",\r\n    color: \"red\"\r\n  }\r\n});\r\n\r\n\r\nconst todayScreen = observer(TodayTasksScreen);\r\nexport default todayScreen;\r\n","import { addDays } from \"date-fns\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { List, ListItem, Spinner } from \"native-base\";\r\nimport { Text } from \"native-base\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, ScrollView, StyleSheet, View } from \"react-native\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport { useStores } from \"../stores/RootStore\";\r\n\r\n\r\nconst KidReport = (props) => {\r\n  const [dateSl,setDate] = useState(new Date());\r\n  const { taskStore } = useStores();\r\n\r\n  useEffect(()=> {\r\n    const weekFromDate = addDays(dateSl, dateSl.getDay() > 0? 1 -dateSl.getDay(): -6);\r\n    const weekToDate = addDays(dateSl, dateSl.getDay() > 0? 7 - dateSl.getDay(): 0);\r\n    taskStore.loadUserPeriod([\"Susu\",\"Nemo\"], weekFromDate, weekToDate);\r\n  },[dateSl]);\r\n\r\n  const onSelectItem = (task: TaskItem) => {\r\n    task.toggleSelect();\r\n  };\r\n\r\n  const SaveSelectList = async() => {\r\n    await taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const onDoneItem = (task: TaskItem) => {\r\n    task.toggleComplete();\r\n  };\r\n\r\n  const SelectDay = (val) => {\r\n    setDate(addDays(dateSl, val));\r\n  };\r\n\r\n  return (\r\n     <ScrollView>\r\n        <View style={{flexDirection: \"column\"}}>\r\n          <View style={{flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 20, marginBottom: 20 }}>\r\n             <Button style={{size: \"\"}} title=\"<< Hm qua\" onPress={()=> SelectDay(-1)}/>\r\n             <Button style={{size: \"\"}} title=\"Lu vic  chn\" onPress={()=> SaveSelectList()}></Button>\r\n             <Button style={{size: \"\"}} title=\"Hm sau >>\" onPress={()=> SelectDay(1)}/>\r\n          </View>\r\n        </View>\r\n        {taskStore.loading ? (<Spinner/> ):\r\n        (\r\n          <View style={{flexDirection: \"column\"}}>\r\n              {taskStore.periodUserList.map(item => \r\n                (<View>\r\n                    <Text style={{fontSize: 20}}> {JSON.stringify(item.user)} </Text>\r\n                    <List>\r\n                      {\r\n                        item.dataDates.map(date=>(\r\n                          <ListItem key={date.date + item.user}>\r\n                            <Text> Ngy: {date.date}</Text>\r\n                            <Text> ng k: {date.selected}</Text>\r\n                            <Text style={{fontSize: 18, color: date.selected > date.completed? \"red\": \"black\"}}>\r\n                               Hon thnh: {date.completed}</Text>\r\n                          </ListItem>\r\n                        ))\r\n                      }\r\n                    </List>\r\n                </View>)\r\n              )}\r\n          </View>\r\n        )}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  result: {\r\n    marginLeft: 10,\r\n    marginBottom: 20,\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"red\"\r\n  }\r\n});\r\n\r\n\r\nconst kidreport = observer(KidReport);\r\nexport default kidreport;","import \"react-native-gesture-handler\";\r\nimport { Body, Button, Container, Header, Icon, Left, Right, Spinner, Tab, Tabs } from \"native-base\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\r\nimport TodayTasksScreen from \"components/TodayTasks\";\r\nimport { ScrollView } from \"react-native\";\r\nimport { Text } from \"native-base\";\r\nimport KidReport from \"@components/KidReport\";\r\nimport {auth} from \"firebase/config\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { FontAwesome } from \"@expo/vector-icons\";\r\nimport { useStores } from \"../../stores/RootStore\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { runInAction } from 'mobx';\r\n\r\nconst HelloWorldApp = (props) => {\r\n\r\n  // Set an initializing state whilst Firebase connects\r\n  const [initializing, setInitializing] = useState(true);\r\n  const navigation = useNavigation();  \r\n  const  { commonStore } = useStores();\r\n\r\n  // Handle user state changes\r\n  const onAuthStateChanged = (user) => {\r\n    if (!user){\r\n      navigation.navigate(\"LoginScreen\");      \r\n    }\r\n    runInAction(()=>{\r\n      commonStore.user = user;\r\n    })\r\n    if (initializing) setInitializing(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const subscriber = auth.onAuthStateChanged(onAuthStateChanged);\r\n    return subscriber; // unsubscribe on unmount\r\n  }, []);  \r\n\r\n  // we will re-render content on tab every time it is active.\r\n  // we could not keep it because the store attached to it will contain data\r\n  // from another user. If we could change store to contain multi user. \r\n  // that will be acceptable to keep content\r\n  const [tabIndex,setTab] = useState(0);\r\n  const tabChanged = (e)=> {\r\n    console.log(e);\r\n    setTab(e.i);\r\n  };\r\n\r\n  const logout = async () => {\r\n    runInAction(()=>{\r\n      commonStore.user = null;\r\n    })\r\n    await auth.signOut();\r\n    navigation.navigate(\"LoginScreen\");\r\n  }\r\n\r\n  return (\r\n    <SafeAreaProvider>\r\n        <Container>\r\n          <ScrollView style={{}}>\r\n          <Header>\r\n            <Left>\r\n              <Button transparent>\r\n                <Icon name=\"menu\" />\r\n              </Button>\r\n            </Left>\r\n            <Body>\r\n              <Text style={{fontSize: 20, color: \"#fff\"}}>SUMO DAYS</Text>\r\n            </Body>\r\n            <Right>\r\n              <Button transparent onPress={logout}>\r\n                <FontAwesome size={24} color=\"white\" name=\"sign-out\" />\r\n              </Button>\r\n            </Right>\r\n          </Header>\r\n          {!commonStore.userName? (<Spinner color=\"green\" />) :\r\n          (commonStore.userRole !== \"admin\" ? (\r\n          <Tabs onChangeTab={tabChanged}>\r\n            <Tab heading={commonStore.userName}>\r\n              <TodayTasksScreen tabIndex={tabIndex} user={commonStore.userName}/>\r\n            </Tab>\r\n            <Tab heading=\"Dad\">\r\n              <KidReport index={tabIndex}></KidReport>\r\n            </Tab>\r\n          </Tabs>\r\n          ): (\r\n          <Tabs onChangeTab={tabChanged}>\r\n            {\r\n              commonStore.userList.filter(x => x.name != \"Dad\").map((x,index)=> (\r\n              <Tab key={index} heading={x.name}>\r\n                { index == tabIndex && <TodayTasksScreen tabIndex={tabIndex} user={x.name}/> }\r\n              </Tab>\r\n              ))\r\n            }\r\n            <Tab heading=\"Dad\">\r\n              <KidReport index={tabIndex}></KidReport>\r\n            </Tab>\r\n          </Tabs>)\r\n          )}\r\n          </ScrollView>\r\n        </Container>\r\n    </SafeAreaProvider>\r\n  );\r\n};\r\nconst app = observer(HelloWorldApp);\r\nexport default app;","import { auth } from \"firebase/config\";\r\nimport { View, Button } from \"native-base\";\r\nimport {Text} from \"react-native\";\r\nimport React from \"react\";\r\nimport { StatusBar, StyleSheet, TextInput, TouchableOpacity } from \"react-native\";\r\nimport {useState} from \"react\";\r\n\r\nconst LoginScreen = ({ navigation }) => {\r\n\r\n  const [email,setEmail] = useState(\"\");\r\n  const [password,setPassword] = useState(\"\");\r\n  const [error,setError] = useState(\"\");\r\n  const login = () => {\r\n    auth.signInWithEmailAndPassword(email,password)\r\n    .then(() => navigation.navigate(\"HomeScreen\"))\r\n    .catch(error => setError({ errorMessage: error.message }));\r\n  };\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n          <Text style={{fontSize: 18, margin: 30}}>ng nhp</Text>\r\n          {error.errorMessage &&\r\n          (<Text style={{ color: \"red\" }}>\r\n            {error.errorMessage}\r\n          </Text>)\r\n          }\r\n          <View style={styles.inputView}>\r\n            <TextInput\r\n              style={styles.TextInput}\r\n              placeholder=\"Email.\"\r\n              placeholderTextColor=\"#003f5c\"\r\n              onChangeText={(email) => setEmail(email)}\r\n            />\r\n          </View>\r\n    \r\n          <View style={styles.inputView}>\r\n            <TextInput\r\n              style={styles.TextInput}\r\n              placeholder=\"Password.\"\r\n              placeholderTextColor=\"#003f5c\"\r\n              secureTextEntry={false}\r\n              onChangeText={(password) => setPassword(password)}\r\n            />\r\n          </View>\r\n    \r\n          <TouchableOpacity>\r\n            <Text style={styles.forgot_button}>Forgot Password?</Text>\r\n          </TouchableOpacity>\r\n    \r\n          <TouchableOpacity style={styles.loginBtn} onPress={login}>\r\n            <Text style={styles.loginText}>LOGIN</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n  );\r\n}\r\n \r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    maxWidth: 600,\r\n    width: 400,\r\n    alignSelf: \"center\",\r\n    backgroundColor: \"#fff\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n \r\n  image: {\r\n    marginBottom: 40,\r\n  },\r\n \r\n  inputView: {\r\n    backgroundColor: \"#FFC0CB\",\r\n    width: \"80%\",\r\n    height: 45,\r\n    marginBottom: 20,\r\n    alignItems: \"center\",\r\n  },\r\n \r\n  TextInput: {\r\n    height: 50,\r\n    flex: 1,\r\n    width: \"90%\",\r\n    padding: 10,\r\n    marginLeft: 20,\r\n  },\r\n \r\n  forgot_button: {\r\n    height: 30,\r\n    marginBottom: 30,\r\n  },\r\n \r\n  loginBtn: {\r\n    width: \"40%\",\r\n    height: 50,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginTop: 40,\r\n    backgroundColor: \"#FFC0CB\",\r\n  },\r\n});\r\n\r\nexport default LoginScreen;","import \"react-native-gesture-handler\";\r\nimport { Body, Button, Container, Header, Icon, Left, Right, Tab, Tabs, Title, View } from \"native-base\";\r\nimport React, { useState } from \"react\";\r\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\r\nimport TodayTasksScreen from \"components/TodayTasks\";\r\n\r\nconst HelloWorldApp = () => {\r\n\r\n  const [tabIndex,setTab] = useState(0);\r\n  const tabChanged = (e)=> {\r\n    console.log(e);\r\n    setTab(e.i);\r\n  };\r\n\r\n  return (\r\n    <View>Detail</View>\r\n  );\r\n};\r\nexport default HelloWorldApp;","import React, { useState, useEffect } from \"react\";\r\nimport { StyleSheet, View, TouchableOpacity, Image } from \"react-native\";\r\nimport { Text } from \"native-base\";\r\nimport { Camera } from \"expo-camera\";\r\nimport { Button, Icon } from \"native-base\";\r\nimport { useRoute } from \"@react-navigation/native\";\r\n\r\nconst ModalScreen = ({ navigation }) => {\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [type, setType] = useState(Camera.Constants.Type.back);\r\n  const route = useRoute();\r\n  const [photo,setPhoto] = useState();\r\n  const [camera,setCamera] = useState();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestPermissionsAsync();\r\n      setHasPermission(status === \"granted\");\r\n    })();\r\n  }, []);\r\n\r\n  if (hasPermission === null) {\r\n    return <View />;\r\n  }\r\n  if (hasPermission === false) {\r\n    return <Text>No access to camera</Text>;\r\n  }\r\n\r\n  const snap = async()=> {\r\n    if (camera) {\r\n      let photo = await camera.takePictureAsync();\r\n      setPhoto(photo);\r\n    }\r\n  };\r\n\r\n  const goBack = () => {\r\n    navigation.navigate(route.params.sourceScreen,{\r\n      sourceScreen: \"CameraScreen\",\r\n      sourceData: route.params?.sourceData\r\n    });\r\n  };\r\n\r\n  const uploadImage = () => {\r\n    navigation.navigate(route.params.sourceScreen,{\r\n      photo: photo,\r\n      sourceScreen: \"CameraScreen\",\r\n      sourceData: route.params?.sourceData\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {!photo &&\r\n      (<Camera style={styles.camera} type={type} ref={ref=> {\r\n          setCamera(ref);\r\n        }}>\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity\r\n            style={styles.button}\r\n            onPress={() => {\r\n              setType(\r\n                type === Camera.Constants.Type.back\r\n                  ? Camera.Constants.Type.front\r\n                  : Camera.Constants.Type.back\r\n              );\r\n            }}>\r\n            <View style={{ flex:1, flexDirection: \"row\", justifyContent: \"space-around\", alignContent: \"center\", marginLeft: 20}}>\r\n              <Text style={styles.text}> Camera sau </Text>\r\n              <Text style={styles.text} onPress={snap}> Chp nh </Text>\r\n              <Button transparent style={{marginRight: 20}} onPress={goBack}>\r\n                <Icon name=\"arrow-back\" />\r\n            </Button>\r\n          </View>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </Camera>\r\n      )}\r\n      {photo &&\r\n        <View style={{ flex:1, flexDirection: \"column\", justifyContent: \"space-around\", alignContent: \"center\", marginLeft: 20}}>\r\n          <Image source={{uri: photo.uri}} style={styles.image}>\r\n          </Image>\r\n          <View style={{flexDirection: \"row\", justifyContent: \"space-around\", alignContent: \"center\"}}>\r\n            <Button onPress={()=> {setPhoto(null);}}>\r\n                <Text style={{fontSize: 18}}> Chp li </Text>\r\n            </Button>\r\n            <Button onPress={uploadImage}>\r\n                <Text style={{fontSize: 18}}> Ti nh </Text>\r\n            </Button>\r\n            <Button onPress={goBack}>\r\n                <Text style={{fontSize: 18}}> Thot </Text>\r\n            </Button>\r\n          </View>\r\n        </View>\r\n      }\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    alignSelf: \"center\",\r\n    width: 640,\r\n    height: 480\r\n  },\r\n  image: {\r\n    flex: 1,\r\n    width: 640,\r\n    height: 480\r\n  },\r\n  camera: {\r\n    flex: 1\r\n  },\r\n  buttonContainer: {\r\n    flex: 1,\r\n    backgroundColor: \"transparent\",\r\n    flexDirection: \"row\",\r\n    margin: 20,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    alignSelf: \"flex-end\",\r\n    alignItems: \"center\",\r\n  },\r\n  text: {\r\n    fontSize: 18,\r\n    marginLeft: 20,\r\n    color: \"white\",\r\n  },\r\n});\r\n\r\n\r\nexport default ModalScreen;","import { useNavigation } from \"@react-navigation/native\";\r\nimport { auth } from \"firebase/config\";\r\nimport { View, Spinner } from \"native-base\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { ActivityIndicator } from \"react-native\";\r\n\r\nconst LoadingScreen = () => {\r\n    // Set an initializing state whilst Firebase connects\r\n    const [initializing, setInitializing] = useState(true);\r\n    const navigation = useNavigation();\r\n    const [user, setUser] = useState();\r\n\r\n    // Handle user state changes\r\n    const onAuthStateChanged = (user) => {\r\n      if (!user){\r\n        navigation.navigate('LoginScreen');\r\n      }\r\n      else {\r\n        navigation.navigate('HomeScreen');\r\n      }\r\n      setUser(user);\r\n      if (initializing) setInitializing(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n      const subscriber = auth.onAuthStateChanged(onAuthStateChanged);\r\n      return subscriber; // unsubscribe on unmount\r\n    }, []);  \r\n    return (\r\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\r\n          <Spinner color='green' />\r\n      </View>\r\n    );\r\n}\r\n\r\nexport default LoadingScreen;","import { createStackNavigator } from '@react-navigation/stack';\r\nimport HomeScreen from \"@components/screens/HomeScreen\";\r\nimport LoginScreen from \"@components/screens/LoginScreen\";\r\nimport React from \"react\";\r\nimport TaskDetailScreen from \"@components/screens/TaskDetailScreen\";\r\nimport CameraScreen from '@components/screens/CameraScreen';\r\nimport LoadingScreen from './LoadingScreen';\r\n\r\nconst MainStack = createStackNavigator();\r\n\r\nconst MainStackScreen = ({navigation}) => {\r\n    return (\r\n      <MainStack.Navigator headerMode=\"none\">\r\n        <MainStack.Screen name=\"LoadingScreen\" component={LoadingScreen} />\r\n        <MainStack.Screen name=\"HomeScreen\" component={HomeScreen} />\r\n        <MainStack.Screen name=\"LoginScreen\" component={LoginScreen} />\r\n        <MainStack.Screen name=\"CameraScreen\" component={CameraScreen} />\r\n        <MainStack.Screen name=\"TaskDetailScreen\" component={TaskDetailScreen} />\r\n      </MainStack.Navigator>\r\n    );\r\n}\r\n\r\nexport default MainStackScreen;","import { createStackNavigator } from '@react-navigation/stack';\r\nimport Home from \"components/screens/Home\";\r\nimport React from \"react\";\r\nimport TaskDetailScreen from \"components/screens/TaskDetailScreen\";\r\nimport LoginScreen from './LoginScreen';\r\n\r\nconst ModelStack = createStackNavigator();\r\n\r\nconst ModelStackScreen = ({navigation}) => {\r\n    return (\r\n      <ModelStack.Navigator headerMode=\"none\">\r\n        <ModelStack.Screen name=\"LoginScreen\" component={LoginScreen} />        \r\n        <ModelStack.Screen name=\"Details\" component={TaskDetailScreen} />\r\n      </ModelStack.Navigator>\r\n    );\r\n}\r\n\r\nexport default ModelStackScreen;","import \"react-native-gesture-handler\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport React from \"react\";\nimport MainStack from \"@components/screens/MainStack\";\nimport ModelStackScreen from \"@components/screens/ModelStack\";\nimport * as Sentry from \"sentry-expo\";\nimport { LogBox } from 'react-native';\n\nLogBox.ignoreLogs(['Setting a timer']);\n\nconst RootStack = createStackNavigator();\n\nSentry.init({\n  dsn: \"https://8e86145982584690aaa486750341de83@o968732.ingest.sentry.io/5920021\",\n  enableInExpoDevelopment: true,\n  debug: true\n});\n\n\nconst TaskApp = () => {\n  return (\n      <NavigationContainer>\n        <RootStack.Navigator mode=\"modal\" headerMode=\"none\">\n          <RootStack.Screen name=\"Main\" component={MainStack} />\n          <RootStack.Screen name=\"MyModal\" component={ModelStackScreen} />\n        </RootStack.Navigator>\n      </NavigationContainer>\n  );\n};\nexport default TaskApp;"],"sourceRoot":""}