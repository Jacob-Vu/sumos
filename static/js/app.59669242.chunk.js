(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{247:function(e,t){Date.prototype.format=function(){var e=this.getMonth()+1,t=this.getDate();return[(t>9?"":"0")+t,(e>9?"":"0")+e,this.getFullYear()].join("-")},String.prototype.toDate=function(){var e=this.split("-");return new Date(e[2],e[1]-1,e[0])}},401:function(e,t,n){"use strict";var a,r,o,l,i,c,s,u=n(95),m=n(349),d=n(628),f=n(0),h=n.n(f),p=n(16),g=n.n(p),y=n(3),b=n.n(y),E=n(11),S=n(631),v=n(31),x=n.n(v),w=n(173),T=n(39),O=n(625),k=n(629),j=n(83),D=n(56),C=n(6),P=n(4),L=n(2),z=n.n(L),I=n(10),B=n.n(I),W=n(21),N=n.n(W),M=n(13),V=n.n(M),A=n(67),F=n.n(A),R=n(390),U=n.n(R),_=n(25),H=n(27),q=(n(600),n(615),n(616),null),J=(q=H.a.apps.length?H.a.app():H.a.initializeApp({apiKey:"AIzaSyCZ1W91h5gI4Ys3K44apJMX-dfAzKmKOzc",authDomain:"todo-app-594e8.firebaseapp.com",projectId:"todo-app-594e8",storageBucket:"todo-app-594e8.appspot.com",messagingSenderId:"254618059037",appId:"1:254618059037:web:2a162824c6e6dfd3d921f4",measurementId:"G-84M73W8WLD"})).auth(),K=q.firestore(),G=q.storage(),Y=n(212),X=n.n(Y),Z=(n(329),a=function(){function e(t,n,a,o,l,i,c){var s=this,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=arguments.length>10&&void 0!==arguments[10]&&arguments[10];B()(this,e),X()(this,"toggleSelect",r,this),this.toggleComplete=function(){s.isCompleted=!s.isCompleted},this.taskStore=t,this.id=n,this.task=a,this.cat=o,this.time=l,this.freqPerWeek=i,this.weekCount=c,this.isSelected=d,this.isCompleted=f,this.attachments=u,this.comments=m,Object(_.f)(this)}return V()(e,null,[{key:"fromTask",value:function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return new e(t,n.id,n.task,n.cat,n.time,n.freqPerWeek,a,r,o,l,i)}}]),e}(),r=F()(a.prototype,"toggleSelect",[_.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isSelected=!e.isSelected}}}),a),Q=(n(247),o=function(){function e(){var t=this;B()(this,e),this.taskList=[],this.periodUserList=[],this.loading=!1,this.loadTaskList=function(e,n){var a,r,o,l,i,c,s,u,m,d;return b.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return t.loading=!0,f.next=3,b.a.awrap(K.collection("todolist").doc("default").get());case 3:return r=f.sent,o=Object(O.a)(n,n.getDay()>0?1-n.getDay():-6),l=Object(O.a)(n,n.getDay()>0?7-n.getDay():0),f.next=8,b.a.awrap(t.loadSelectedDate([e],o,l));case 8:if(i=f.sent,c=null==(a=i.find((function(e){return new Date(1e3*e.date.seconds).toLocaleDateString()==n.toLocaleDateString()})))?void 0:a.selectedTasks){f.next=16;break}return u=e+"_"+Object(k.a)(n,"dd-MM-yyyy"),f.next=14,b.a.awrap(K.collection("selectlist").doc(u).get());case 14:m=f.sent,c=null==(s=m.data())?void 0:s.selectedTasks;case 16:r.exists&&r.data().workList?(d=r.data().workList.map((function(e){var n,a=null==(n=c)?void 0:n.find((function(t){return e.id==t.taskId})),r=i.reduce((function(t,n){return n.selectedTasks.find((function(t){return t.taskId==e.id}))?t+1:t}),0);return Z.fromTask(t,e,r,null==a?void 0:a.attachments,null==a?void 0:a.comments,null!=a,null==a?void 0:a.isCompleted)})),Object(_.i)((function(){var e;t.taskList=[],(e=t.taskList).push.apply(e,N()(d)),t.loading=!1}))):console.log("No doc values found");case 17:case"end":return f.stop()}}),null,null,null,Promise)},this.loadUserPeriod=function(e,n,a){var r;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r=[],t.loading=!0,o.next=4,b.a.awrap(t.loadSelectedDate(e,n,a));case 4:o.sent.forEach((function(e){var t={date:Object(k.a)(new Date(1e3*e.date.seconds),"dd-MM-yyyy"),selected:e.selectedTasks.length,completed:e.selectedTasks.filter((function(e){return e.isCompleted})).length},n=r.find((function(t){return t.user==e.user}));n?n.dataDates.push(t):r.push({user:e.user,dataDates:[t]})})),Object(_.i)((function(){t.loading=!1,t.periodUserList=r}));case 7:case"end":return o.stop()}}),null,null,null,Promise)},this.loadSelectedDate=function(e,t,n){var a;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=[],r.next=3,b.a.awrap(K.collection("selectlist").where("user","in",e).where("date",">=",t).where("date","<=",n).get());case 3:return r.sent.forEach((function(e){a.push(e.data())})),r.abrupt("return",a);case 6:case"end":return r.stop()}}),null,null,null,Promise)},this.saveSelectList=function(e,n){var a,r;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading=!0,a=e+"_"+Object(k.a)(n,"dd-MM-yyyy"),r=t.taskList.filter((function(e){return e.isSelected})).map((function(e){var t;return{taskId:e.id,isCompleted:e.isCompleted,comments:e.comments,attachments:null==(t=e.attachments)?void 0:t.map((function(e){return{ref:e.ref,url:null==e?void 0:e.url,mimeType:null==e?void 0:e.mimeType}}))}})),o.next=5,b.a.awrap(K.collection("selectlist").doc(a).set({date:n,lastUpdate:new Date,user:e,selectedTasks:r}));case 5:Object(_.i)((function(){t.loading=!1}));case 6:case"end":return o.stop()}}),null,null,null,Promise)},this.migrate=function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:K.collection("todolist").doc("default");case 1:case"end":return e.stop()}}),null,null,null,Promise)},console.log("Initialize TaskStore..."),Object(_.f)(this)}return V()(e,[{key:"sortedTaskList",get:function(){return U()(this.taskList,["isSelected","id"],["desc","asc"])}},{key:"totalCompleted",get:function(){return this.taskList.filter((function(e){return e.isCompleted})).length}},{key:"totalSelected",get:function(){return this.taskList.filter((function(e){return e.isSelected})).length}},{key:"saveSelectTask",value:function(e){}}]),e}(),F()(o.prototype,"sortedTaskList",[_.c],Object.getOwnPropertyDescriptor(o.prototype,"sortedTaskList"),o.prototype),F()(o.prototype,"totalCompleted",[_.c],Object.getOwnPropertyDescriptor(o.prototype,"totalCompleted"),o.prototype),F()(o.prototype,"totalSelected",[_.c],Object.getOwnPropertyDescriptor(o.prototype,"totalSelected"),o.prototype),F()(o.prototype,"saveSelectTask",[_.b],Object.getOwnPropertyDescriptor(o.prototype,"saveSelectTask"),o.prototype),o),$=(l=function(){function e(){B()(this,e),X()(this,"selectedTasks",i,this)}return V()(e,[{key:"migrateData",value:function(e,t){var n,a,r,o,l,i;return b.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.format(),c.next=3,b.a.awrap(K.collection("selectlist"+e).doc(n).get());case 3:return a=c.sent,c.next=6,b.a.awrap(K.collection("donelist"+e).doc(n).get());case 6:r=c.sent,o=[],l=[],i=e+"_"+n,r.exists&&r.data().doneTasks&&r.data().doneTasks.forEach((function(e){l.push(e)})),a.exists&&a.data().selectedTasks&&a.data().selectedTasks.forEach((function(n){o.push({id:i+"_"+n,taskId:n,date:t,user:e,isCompleted:l.includes(n),attachments:[]})})),K.collection("selectlist").doc(i).set({lastUpdated:new Date,selectedTasks:o});case 13:case"end":return c.stop()}}),null,null,null,Promise)}}]),e}(),i=F()(l.prototype,"selectedTasks",[_.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l),ee=n(14),te=function e(){var t=this;B()(this,e),this.loading=!1,this.addAttachments=function(e,n,a){var r,o,l,i,c;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:r=n.file,o=n.uri,t.loading=!0,l=t.getPlatformPath({uri:o}).value,i=t.getFileName((null==r?void 0:r.fileName)||(null==r?void 0:r.name),null==r?void 0:r.path),c="attachFiles/"+i,Object(_.i)((function(){var n,o,i,s,u;return b.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return t.loading=!1,m.next=3,b.a.awrap(fetch(l));case 3:return n=m.sent,m.next=6,b.a.awrap(n.blob());case 6:return o=m.sent,i=G.ref().child(c),m.next=10,b.a.awrap(i.put(o));case 10:return m.sent,m.next=13,b.a.awrap(i.getDownloadURL());case 13:s=m.sent,console.log(s),u={ref:c,url:s,mimeType:null==r?void 0:r.type},e.attachments.push(u),a&&a();case 18:case"end":return m.stop()}}),null,null,null,Promise)}));case 6:case"end":return s.stop()}}),null,null,null,Promise)},this.getFileName=function(e,t){if("ios"===ee.a.OS&&(t="~"+t.substring(t.indexOf("/Documents"))),"web"==ee.a.OS){var n=new Date;return Object(k.a)(n,"yyMMdd")+"/"+Date.now()+"_"+e}return Object(k.a)(date,"yyMMdd")+"/"+t.split("/").pop()+"_"+e},this.getPlatformPath=function(e){var t=e.path,n=e.uri;return ee.a.select({android:{value:t},web:{value:n},ios:{value:n}})},this.getPlatformURI=function(e){var n=e;return isNaN(e)&&(n={uri:t.state.imagePath},"android"==ee.a.OS&&(n.uri="file:///"+n.uri)),n},console.log("Initialize TaskStore..."),Object(_.f)(this)},ne=(c=function(){function e(){B()(this,e),this.user=null,this.userList=[{role:"child",name:"Susu",email:"tulamuaban@gmail.com"},{role:"child",name:"Nemo",email:"dragon.tvq@gmail.com"},{role:"admin",name:"Dad",email:"quyetvv@gmail.com"}],console.log("Initialize CommonStore..."),Object(_.f)(this)}return V()(e,[{key:"userName",get:function(){var e,t=this;return null==(e=this.userList.find((function(e){var n;return e.email==(null==(n=t.user)?void 0:n.email)})))?void 0:e.name}},{key:"userRole",get:function(){var e,t=this;return null==(e=this.userList.find((function(e){var n;return e.email==(null==(n=t.user)?void 0:n.email)})))?void 0:e.role}},{key:"otherName",get:function(){var e,t=this;return null==(e=this.userList.find((function(e){return e.name!==t.userName&&"Dad"!=e.name})))?void 0:e.name}}]),e}(),F()(c.prototype,"userName",[_.c],Object.getOwnPropertyDescriptor(c.prototype,"userName"),c.prototype),F()(c.prototype,"userRole",[_.c],Object.getOwnPropertyDescriptor(c.prototype,"userRole"),c.prototype),F()(c.prototype,"otherName",[_.c],Object.getOwnPropertyDescriptor(c.prototype,"otherName"),c.prototype),c),ae=n(626),re=n(391),oe=(s=function(){function e(){var t=this;B()(this,e),this.loading=!0,this.balance=null,this.transToday=[],this.loadBalanceAndTrans=function(e,n){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(t.loadBalance(e));case 2:return a.next=4,b.a.awrap(t.loadTrans([e],n));case 4:case"end":return a.stop()}}),null,null,null,Promise)},this.loadBalance=function(e){var n;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,b.a.awrap(K.collection("money").doc(e+"_balance").get());case 3:if(!(n=a.sent).exists){a.next=8;break}Object(_.i)((function(){t.balance=n.data()})),a.next=11;break;case 8:return t.balance={total:0,lastUpdate:new Date,target:2e7},a.next=11,b.a.awrap(K.collection("money").doc(e+"_balance").set(t.balance));case 11:Object(_.i)((function(){t.loading=!1}));case 12:case"end":return a.stop()}}),null,null,null,Promise)},this.addTrans=function(e,n){var a,r,o;return b.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t.loading=!0,r=Object(k.a)(n.datetime,"dd-MM-yyyy"),o=parseInt(n.value),t.balance.total+=isNaN(o)?0:o,n.total=t.balance.total,l.next=7,b.a.awrap(K.collection("money").doc(e+"_"+r+"_"+n.id).set(n));case 7:return l.next=9,b.a.awrap(K.collection("money").doc(e+"_balance").set({total:t.balance.total,lastUpdate:new Date,target:null!=(a=t.balance.target)?a:2e7}));case 9:Object(_.i)((function(){t.transToday.push(n),t.loading=!1}));case 10:case"end":return l.stop()}}),null,null,null,Promise)},this.loadTrans=function(e,n){var a,r;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading=!0,t.transToday=[],a=Object(re.a)(n),r=Object(ae.a)(n),o.next=6,b.a.awrap(K.collection("money").where("user","in",e).where("datetime",">=",a).where("datetime","<=",r).get());case 6:o.sent.forEach((function(e){t.transToday.push(e.data())})),Object(_.i)((function(){t.loading=!1}));case 9:case"end":return o.stop()}}),null,null,null,Promise)},console.log("Initialize CommonStore..."),Object(_.f)(this)}return V()(e,[{key:"completedPercent",get:function(){return this.balance.total/this.balance.target*100}}]),e}(),F()(s.prototype,"completedPercent",[_.c],Object.getOwnPropertyDescriptor(s.prototype,"completedPercent"),s.prototype),s);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ie=new function e(){B()(this,e),this.taskStore=new Q(this),this.selectTaskStore=new $(this),this.storageStore=new te(this),this.commonStore=new ne(this),this.moneyStore=new oe(this)},ce=h.a.createContext(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){z()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ie)),se=function(){return h.a.useContext(ce)},ue=n(188),me=function(e){var t=e.bgcolor,n=e.completed,a={height:"100%",width:n+"%",backgroundColor:t,textAlign:"right"};return h.a.createElement(E.View,{style:{height:20,width:"95%",backgroundColor:"#e0e0de",margin:30}},h.a.createElement(E.View,{style:a},h.a.createElement(E.View,{style:{padding:5,color:"white",fontWeight:"bold"}},h.a.createElement(E.Text,null,n+"%"))))},de=function e(t,n,a,r,o,l,i,c){var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];B()(this,e),this.id=t,this.awardName=n,this.size=a,this.value=o,this.total=l,this.type=r,this.datetime=i,this.user=c,this.attachments=s,this.comments=u,Object(_.f)(this)},fe=C.a.create({baseText:{fontSize:11},titleText:{fontSize:15,fontWeight:"bold"},awardValue:{margin:20,height:20,marginTop:0,fontSize:16,fontStyle:"italic",borderWidth:0,borderBottomColor:"#000000",borderBottomWidth:1,borderColor:"rgb(201, 201, 201)"},input:{height:40,width:300,maxWidth:500,marginLeft:20,fontSize:16,fontStyle:"italic",borderWidth:0,borderBottomColor:"#000000",borderBottomWidth:1,borderColor:"rgb(201, 201, 201)"}}),he=function(e){var t=Object(f.useState)(""),n=g()(t,2),a=n[0],r=n[1],o=Object(f.useState)(1e4),l=g()(o,2),i=l[0],c=l[1],s=Object(f.useState)(30),m=g()(s,2),d=m[0],p=m[1],y=function(){return i>0?i<=1e4?"star":i>1e4&&i<4e4?"heart":"medal":i>=-1e4?"surprise":i<-1e4&&i>-4e4?"sad-cry":"angry"},b=function(e){1e4==i&&e<0?c(-1e4):-1e4==i&&e>0?c(1e4):(p(i>0?d+e:d-e),(i>=5e4||i<=-5e4)&&(e*=5),c(parseInt(i)+1e3*e))};return h.a.createElement(E.View,{style:{flexDirection:"column"}},h.a.createElement(E.View,{style:{flexDirection:"row"}},h.a.createElement(ue.a,{name:y(),style:{fontSize:d,marginLeft:20},color:i>0?"rgb(63, 81, 181)":"#786d6c"}),h.a.createElement(ue.a,{name:"plus",style:{fontSize:24,marginLeft:30},onPress:function(e){return b(10)}}),h.a.createElement(ue.a,{name:"minus",style:{fontSize:24,marginLeft:10},onPress:function(e){return b(-10)}}),h.a.createElement(u.a,{style:fe.awardValue,placeholder:"Gi\xe1 tr\u1ecb th\u01b0\u1edfng",value:i.toString(),onChangeText:c})),h.a.createElement(u.a,{style:fe.input,placeholder:"Th\xeam nh\u1eadn x\xe9t...",value:a,onChangeText:r}),h.a.createElement(E.Button,{style:{margin:10},onPress:function(){return function(){var t=new de(Date.now(),y(),d,"Award",i,0,e.date,e.user,[],[a]);e.onSubmitTranDetail&&e.onSubmitTranDetail(t)}()}},h.a.createElement(E.Text,{style:{fontSize:16}}," X\xe1c nh\u1eadn ")))},pe=(C.a.create({baseText:{fontSize:11},titleText:{fontSize:15,fontWeight:"bold"},input:{height:40,width:300,maxWidth:500,marginLeft:20,fontSize:16,fontStyle:"italic",borderWidth:0,borderBottomColor:"#000000",borderBottomWidth:1,borderColor:"rgb(201, 201, 201)"}}),Object(j.a)((function(e){var t=se(),n=t.commonStore,a=t.moneyStore;Object(f.useEffect)((function(){a.loadBalanceAndTrans(e.user,e.date)}),[e.user,e.date,e.tabIndex]);return a.loading&&!a.balance?h.a.createElement(E.Spinner,{color:"green"}):h.a.createElement(E.View,{style:{flexDirection:"column",width:"100%"}},h.a.createElement(E.View,{style:{}},h.a.createElement(E.Text,{style:{color:"#1d4d99"}}," Total balance: ",(a.balance.total/1e3).toFixed(0),"k/",(a.balance.target/1e3).toFixed(0),"k"),h.a.createElement(me,{bgcolor:"#eb4034",completed:a.completedPercent.toFixed(2)})),h.a.createElement(E.View,null,h.a.createElement(E.Text,{style:{color:"#1d4d99"}}," Results: "),h.a.createElement(E.View,{style:{flexDirection:"column"}},a.transToday.map((function(e){return function(e){return h.a.createElement(E.View,{style:{flexDirection:"column",margin:10}},h.a.createElement(ue.a,{name:e.awardName,style:{fontSize:e.size},color:e.value>0?"red":"#786d6c"}),h.a.createElement(E.Text,null," ",(e.value/1e3).toFixed(0),"k "),e.comments.length>0&&""!=e.comments[0]&&h.a.createElement(E.Text,{style:{marginTop:10,fontStyle:"italic",color:"#3962a3"}}," ",Object(k.a)(new Date(1e3*e.datetime),"HH:mm"),": ",e.comments[0]))}(e)})))),"admin"==n.userRole&&h.a.createElement(E.View,{style:{flexDirection:"row",marginTop:20}},h.a.createElement(E.Text,{style:{color:"#1d4d99"}}," Evaluation: "),h.a.createElement(he,{user:e.user,date:e.date,onSubmitTranDetail:function(t){a.addTrans(e.user,Object(_.j)(t))}})))}))),ge=n(65),ye=n(168),be=n(402),Ee=C.a.create({baseText:{fontSize:11},titleText:{fontSize:15,fontWeight:"bold"},input:{height:40,width:300,maxWidth:500,marginLeft:20,fontSize:16,fontStyle:"italic",borderWidth:0,borderBottomColor:"#000000",borderBottomWidth:1,borderColor:"rgb(201, 201, 201)"}}),Se=function(e){var t,n=Object(f.useState)(""),a=g()(n,2),r=a[0],o=a[1],l=se(),i=l.taskStore,c=(l.storageStore,l.commonStore),s=e.item;return h.a.createElement(E.View,{style:{width:400,marginLeft:20,marginTop:20,borderWidth:1,borderColor:"rgb(201, 201, 201)"}},null==(t=s.comments)?void 0:t.map((function(e,t){return h.a.createElement(E.Text,{style:{fontStyle:"italic",color:t%2==0?"#3962a3":"#39a372"},key:e.id}," ",Object(k.a)(new Date(e.id),"HH:mm"),": ",e.text)})),h.a.createElement(E.View,{style:{flexDirection:"row",marginTop:20}},h.a.createElement(u.a,{style:Ee.input,placeholder:"Write to here...",value:r,onChangeText:o}),h.a.createElement(E.Button,{style:{marginLeft:10},transparent:!0,onPress:function(){return s.comments.push({id:Date.now(),text:c.userName+":"+r}),o(""),void i.saveSelectList(e.user,e.date)}},h.a.createElement(w.a,{name:"send-o",style:{fontSize:25},color:"rgb(63, 81, 181)"}))))},ve=n(392),xe=C.a.create({rightControl:{width:120,minWidth:120,maxWidth:200,flexDirection:"row",justifyContent:"space-evenly",alignContent:"flex-start",alignSelf:"flex-start"},baseText:{fontSize:11},titleText:{fontSize:15,fontWeight:"bold",width:500,maxWidth:Object(ve.a)("50%")},input:{height:40,maxWidth:500,marginLeft:20,fontSize:18,borderWidth:1,borderColor:"rgb(201, 201, 201)"},taskButton:{flex:1,justifyContent:"space-around",alignContent:"center",alignSelf:"center"}}),we=Object(j.a)((function(e){var t,n=e.taskItem,a=(Object(T.useNavigation)(),Object(T.useRoute)()),r=se(),o=r.taskStore,l=r.storageStore,i=Object(f.useState)(!1),c=g()(i,2),s=c[0],u=c[1],m=function(){o.saveSelectList(e.user,e.date)};return h.a.createElement(E.ListItem,{key:n.id,style:{backgroundColor:n.isSelected?"#cde1f9":"#fcfcfc"}},h.a.createElement(E.Body,{style:{flexDirection:"column"}},h.a.createElement(P.a,{style:{flexDirection:"row"}},h.a.createElement(P.a,null,h.a.createElement(ye.a,{onPress:function(){return e.onSelectItem(n)}},h.a.createElement(P.a,null,h.a.createElement(E.Text,{style:xe.titleText},n.id,". ",n.task),h.a.createElement(E.Text,{style:xe.baseText},"M\u1ee5c: ",n.cat," "),n.weekCount>0?h.a.createElement(E.Text,{style:{fontSize:13,color:n.weekCount>n.freqPerWeek?"red":""}},"\u0110\xe3 ch\u1ecdn: ",n.weekCount," l\u1ea7n (\u0110\u01b0\u1ee3c ch\u1ecdn ",n.freqPerWeek," l\u1ea7n) "):h.a.createElement(E.Text,{style:{fontSize:13}},"\u0110\u01b0\u1ee3c ch\u1ecdn ",n.freqPerWeek," l\u1ea7n "),function(e){return 0===e.attachments.len?h.a.createElement(h.a.Fragment,null):h.a.createElement(P.a,{style:{flexDirection:"row"}},e.attachments.map((function(e){var t;return e.mimeType&&e.mimeType.startsWith("image/")?h.a.createElement(ge.a,{key:e.url,source:{uri:null!=(t=e.value)?t:e.url},style:{width:50,height:50,marginLeft:20}}):h.a.createElement("a",{key:e.url,href:e.url,style:{width:50,height:50,marginLeft:20}})})))}(n),l.loading&&(null==(t=a.params)?void 0:t.id)==n.id&&h.a.createElement(P.a,null,h.a.createElement(E.Spinner,null),h.a.createElement(E.Text,null,"\u0110ang t\u1ea3i l\xean cloud... ")))))),h.a.createElement(P.a,null,s&&h.a.createElement(Se,{item:n,user:e.user,date:e.date}))),n.isSelected&&h.a.createElement(E.Right,{style:xe.rightControl},h.a.createElement(P.a,{style:xe.taskButton},h.a.createElement(E.Switch,{value:n.isCompleted,onValueChange:function(t){e.onDoneItem(n)}})),h.a.createElement(E.Button,{style:xe.taskButton,transparent:!0,onPress:function(){return u(!s)}},h.a.createElement(w.a,{name:"comment",style:{fontSize:25},color:n.comments.length>0?"red":"rgb(63, 81, 181)"}),n.comments.length>0&&h.a.createElement(E.Text,{style:{fontSize:14,fontWeight:"bold",color:"white",position:"absolute"}},n.comments.length)),h.a.createElement(E.Button,{style:xe.taskButton,transparent:!0,onPress:function(){return function(t){var n;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(be.a());case 2:(n=a.sent).file?(l.addAttachments(t,n,m),e.onAddFile&&e.onAddFile()):console.log("User cancelled image picker");case 4:case"end":return a.stop()}}),null,null,null,Promise)}(n)}},h.a.createElement(w.a,{style:{fontSize:25},name:"cloud-upload",color:"rgb(63, 81, 181)"}))))})),Te=C.a.create({result:{marginLeft:10,marginBottom:20,fontSize:22,fontWeight:"bold",color:"red"}}),Oe=Object(j.a)((function(e){var t,n=Object(f.useState)(new Date),a=g()(n,2),r=a[0],o=a[1],l=se(),i=l.taskStore,c=(l.commonStore,l.storageStore),s=Object(T.useRoute)();Object(f.useEffect)((function(){i.loadTaskList(e.user,r)}),[e.tabIndex,e.user,r]);var u=function(){i.saveSelectList(e.user,r)};Object(f.useEffect)((function(){var t,n,a;null!=(t=s.params)&&t.photo&&(null==(n=s.params.sourceData)?void 0:n.user)==e.user&&c.addAttachments(null==(a=s.params.sourceData)?void 0:a.taskItem,s.params.photo,u)}),[null==(t=s.params)?void 0:t.photo]);var m=function(t){t.toggleSelect(),i.saveSelectList(e.user,r)},d=function(t){t.toggleComplete(),i.saveSelectList(e.user,r)},p=function(e){},y=function(e){o(Object(O.a)(r,e))};return h.a.createElement(D.a,null,h.a.createElement(P.a,{style:{flexDirection:"column"}},h.a.createElement(P.a,{style:{flexDirection:"row",justifyContent:"space-around",marginTop:20,marginBottom:20}},h.a.createElement(E.Button,{transparent:!0,onPress:function(){return y(-1)}},h.a.createElement(w.a,{style:{fontSize:35},name:"backward",color:"rgb(33, 150, 243)"})),h.a.createElement(P.a,{style:{flexDirection:"row",justifyContent:"center"}},h.a.createElement(E.Text,{style:{fontSize:18,fontWeight:"bold",color:"red"}}," ",Object(k.a)(r,"iiii, dd-MM-yyyy")," "),i.loading&&h.a.createElement(E.Spinner,{style:{height:35}})),h.a.createElement(E.Button,{transparent:!0,onPress:function(){return y(1)}},h.a.createElement(w.a,{style:{fontSize:35},name:"forward",color:"rgb(33, 150, 243)"})))),h.a.createElement(E.Card,null,h.a.createElement(E.CardItem,null,h.a.createElement(E.Body,null,h.a.createElement(pe,{user:e.user,date:r,tabIndex:e.tabIndex})))),i.sortedTaskList.length>0&&h.a.createElement(P.a,{style:{flexDirection:"column"}},h.a.createElement(E.Text,{style:Te.result},e.user," \u0111\xe3 ch\u1ecdn ",i.totalSelected," vi\u1ec7c. ","\r\n","\u0110\xe3 ho\xe0n th\xe0nh: ",i.totalCompleted," vi\u1ec7c"),h.a.createElement(E.Text,{style:{fontSize:18,fontWeight:"bold",marginLeft:15,marginBottom:20}},"Danh s\xe1ch c\xf4ng vi\u1ec7c: "),h.a.createElement(E.List,null,i.sortedTaskList.map((function(t,n){return h.a.createElement(we,x()({key:t.id,taskItem:t,date:r,onSelectItem:m,onDoneItem:d,onAddFile:p},e))})))))})),ke=n(124),je=(C.a.create({result:{marginLeft:10,marginBottom:20,fontSize:18,fontWeight:"bold",color:"red"}}),Object(j.a)((function(e){var t=Object(f.useState)(new Date),n=g()(t,2),a=n[0],r=n[1],o=se().taskStore;Object(f.useEffect)((function(){var e=Object(O.a)(a,a.getDay()>0?1-a.getDay():-6),t=Object(O.a)(a,a.getDay()>0?7-a.getDay():0);o.loadUserPeriod(["Susu","Nemo"],e,t)}),[a]);var l=function(e){r(Object(O.a)(a,e))};return h.a.createElement(D.a,null,h.a.createElement(P.a,{style:{flexDirection:"column"}},h.a.createElement(P.a,{style:{flexDirection:"row",justifyContent:"space-around",marginTop:20,marginBottom:20}},h.a.createElement(ke.a,{style:{size:""},title:"<< H\xf4m qua",onPress:function(){return l(-1)}}),h.a.createElement(ke.a,{style:{size:""},title:"L\u01b0u vi\u1ec7c \u0111\xe3 ch\u1ecdn",onPress:function(){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(o.saveSelectList(e.user,a));case 2:case"end":return t.stop()}}),null,null,null,Promise)}}),h.a.createElement(ke.a,{style:{size:""},title:"H\xf4m sau >>",onPress:function(){return l(1)}}))),o.loading?h.a.createElement(E.Spinner,null):h.a.createElement(P.a,{style:{flexDirection:"column"}},o.periodUserList.map((function(e){return h.a.createElement(P.a,null,h.a.createElement(E.Text,{style:{fontSize:20}}," ",JSON.stringify(e.user)," "),h.a.createElement(E.List,null,e.dataDates.map((function(t){return h.a.createElement(E.ListItem,{key:t.date+e.user},h.a.createElement(E.Text,null," Ng\xe0y: ",t.date),h.a.createElement(E.Text,null," \u0110\u0103ng k\xfd: ",t.selected),h.a.createElement(E.Text,{style:{fontSize:18,color:t.selected>t.completed?"red":"black"}},"Ho\xe0n th\xe0nh: ",t.completed))}))))}))))}))),De=Object(j.a)((function(e){var t=Object(f.useState)(!0),n=g()(t,2),a=n[0],r=n[1],o=Object(T.useNavigation)(),l=se().commonStore,i=function(e){e||o.navigate("LoginScreen"),Object(_.i)((function(){l.user=e})),a&&r(!1)};Object(f.useEffect)((function(){return J.onAuthStateChanged(i)}),[]);var c=Object(f.useState)(0),s=g()(c,2),u=s[0],m=s[1],d=function(e){console.log(e),m(e.i)};return h.a.createElement(S.b,null,h.a.createElement(E.Container,null,h.a.createElement(D.a,{style:{}},h.a.createElement(E.Header,null,h.a.createElement(E.Left,null,h.a.createElement(E.Button,{transparent:!0},h.a.createElement(E.Icon,{name:"menu"}))),h.a.createElement(E.Body,null,h.a.createElement(E.Text,{style:{fontSize:20,color:"#fff"}},"SUMO DAYS")),h.a.createElement(E.Right,null,h.a.createElement(E.Button,{transparent:!0,onPress:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(_.i)((function(){l.user=null})),e.next=3,b.a.awrap(J.signOut());case 3:o.navigate("LoginScreen");case 4:case"end":return e.stop()}}),null,null,null,Promise)}},h.a.createElement(w.a,{size:24,color:"white",name:"sign-out"})))),l.userName?"admin"!==l.userRole?h.a.createElement(E.Tabs,{onChangeTab:d},h.a.createElement(E.Tab,{heading:l.userName},h.a.createElement(Oe,{tabIndex:u,user:l.userName})),h.a.createElement(E.Tab,{heading:"Dad"},h.a.createElement(je,{index:u}))):h.a.createElement(E.Tabs,{onChangeTab:d},l.userList.filter((function(e){return"Dad"!=e.name})).map((function(e,t){return h.a.createElement(E.Tab,{key:t,heading:e.name},t==u&&h.a.createElement(Oe,{tabIndex:u,user:e.name}))})),h.a.createElement(E.Tab,{heading:"Dad"},h.a.createElement(je,{index:u}))):h.a.createElement(E.Spinner,{color:"green"}))))})),Ce=n(71),Pe=n(49),Le=n(59),ze=C.a.create({container:{flex:1,maxWidth:600,width:400,alignSelf:"center",backgroundColor:"#fff",alignItems:"center",justifyContent:"center"},image:{marginBottom:40},inputView:{backgroundColor:"#FFC0CB",width:"80%",height:45,marginBottom:20,alignItems:"center"},TextInput:{height:50,flex:1,width:"90%",padding:10,marginLeft:20},forgot_button:{height:30,marginBottom:30},loginBtn:{width:"40%",height:50,alignItems:"center",justifyContent:"center",marginTop:40,backgroundColor:"#FFC0CB"}}),Ie=function(e){var t=e.navigation,n=Object(f.useState)(""),a=g()(n,2),r=a[0],o=a[1],l=Object(f.useState)(""),i=g()(l,2),c=i[0],s=i[1],u=Object(f.useState)(""),m=g()(u,2),d=m[0],p=m[1];return h.a.createElement(E.View,{style:ze.container},h.a.createElement(Ce.a,{style:{fontSize:18,margin:30}},"\u0110\u0103ng nh\u1eadp"),d.errorMessage&&h.a.createElement(Ce.a,{style:{color:"red"}},d.errorMessage),h.a.createElement(E.View,{style:ze.inputView},h.a.createElement(Pe.a,{style:ze.TextInput,placeholder:"Email.",placeholderTextColor:"#003f5c",onChangeText:function(e){return o(e)}})),h.a.createElement(E.View,{style:ze.inputView},h.a.createElement(Pe.a,{style:ze.TextInput,placeholder:"Password.",placeholderTextColor:"#003f5c",secureTextEntry:!1,onChangeText:function(e){return s(e)}})),h.a.createElement(Le.a,null,h.a.createElement(Ce.a,{style:ze.forgot_button},"Forgot Password?")),h.a.createElement(Le.a,{style:ze.loginBtn,onPress:function(){J.signInWithEmailAndPassword(r,c).then((function(){return t.navigate("HomeScreen")})).catch((function(e){return p({errorMessage:e.message})}))}},h.a.createElement(Ce.a,{style:ze.loginText},"LOGIN")))},Be=function(){var e=Object(f.useState)(0),t=g()(e,2);t[0],t[1];return h.a.createElement(E.View,null,"Detail")},We=n(630),Ne=C.a.create({container:{alignSelf:"center",width:640,height:480},image:{flex:1,width:640,height:480},camera:{flex:1},buttonContainer:{flex:1,backgroundColor:"transparent",flexDirection:"row",margin:20},button:{flex:1,alignSelf:"flex-end",alignItems:"center"},text:{fontSize:18,marginLeft:20,color:"white"}}),Me=function(e){var t=e.navigation,n=Object(f.useState)(null),a=g()(n,2),r=a[0],o=a[1],l=Object(f.useState)(We.a.Constants.Type.back),i=g()(l,2),c=i[0],s=i[1],u=Object(T.useRoute)(),m=Object(f.useState)(),d=g()(m,2),p=d[0],y=d[1],S=Object(f.useState)(),v=g()(S,2),x=v[0],w=v[1];if(Object(f.useEffect)((function(){!function(){var e,t;b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(We.a.requestPermissionsAsync());case 2:e=n.sent,t=e.status,o("granted"===t);case 5:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]),null===r)return h.a.createElement(P.a,null);if(!1===r)return h.a.createElement(E.Text,null,"No access to camera");var O=function(){var e;t.navigate(u.params.sourceScreen,{sourceScreen:"CameraScreen",sourceData:null==(e=u.params)?void 0:e.sourceData})};return h.a.createElement(P.a,{style:Ne.container},!p&&h.a.createElement(We.a,{style:Ne.camera,type:c,ref:function(e){w(e)}},h.a.createElement(P.a,{style:Ne.buttonContainer},h.a.createElement(Le.a,{style:Ne.button,onPress:function(){s(c===We.a.Constants.Type.back?We.a.Constants.Type.front:We.a.Constants.Type.back)}},h.a.createElement(P.a,{style:{flex:1,flexDirection:"row",justifyContent:"space-around",alignContent:"center",marginLeft:20}},h.a.createElement(E.Text,{style:Ne.text}," Camera sau "),h.a.createElement(E.Text,{style:Ne.text,onPress:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x){t.next=5;break}return t.next=3,b.a.awrap(x.takePictureAsync());case 3:e=t.sent,y(e);case 5:case"end":return t.stop()}}),null,null,null,Promise)}}," Ch\u1ee5p \u1ea3nh "),h.a.createElement(E.Button,{transparent:!0,style:{marginRight:20},onPress:O},h.a.createElement(E.Icon,{name:"arrow-back"})))))),p&&h.a.createElement(P.a,{style:{flex:1,flexDirection:"column",justifyContent:"space-around",alignContent:"center",marginLeft:20}},h.a.createElement(ge.a,{source:{uri:p.uri},style:Ne.image}),h.a.createElement(P.a,{style:{flexDirection:"row",justifyContent:"space-around",alignContent:"center"}},h.a.createElement(E.Button,{onPress:function(){y(null)}},h.a.createElement(E.Text,{style:{fontSize:18}}," Ch\u1ee5p l\u1ea1i ")),h.a.createElement(E.Button,{onPress:function(){var e;t.navigate(u.params.sourceScreen,{photo:p,sourceScreen:"CameraScreen",sourceData:null==(e=u.params)?void 0:e.sourceData})}},h.a.createElement(E.Text,{style:{fontSize:18}}," T\u1ea3i \u1ea3nh ")),h.a.createElement(E.Button,{onPress:O},h.a.createElement(E.Text,{style:{fontSize:18}}," Tho\xe1t ")))))},Ve=function(){var e=Object(f.useState)(!0),t=g()(e,2),n=t[0],a=t[1],r=Object(T.useNavigation)(),o=Object(f.useState)(),l=g()(o,2),i=(l[0],l[1]),c=function(e){e?r.navigate("HomeScreen"):r.navigate("LoginScreen"),i(e),n&&a(!1)};return Object(f.useEffect)((function(){return J.onAuthStateChanged(c)}),[]),h.a.createElement(E.View,{style:{flex:1,alignItems:"center",justifyContent:"center"}},h.a.createElement(E.Spinner,{color:"green"}))},Ae=Object(d.a)(),Fe=function(e){e.navigation;return h.a.createElement(Ae.Navigator,{headerMode:"none"},h.a.createElement(Ae.Screen,{name:"LoadingScreen",component:Ve}),h.a.createElement(Ae.Screen,{name:"HomeScreen",component:De}),h.a.createElement(Ae.Screen,{name:"LoginScreen",component:Ie}),h.a.createElement(Ae.Screen,{name:"CameraScreen",component:Me}),h.a.createElement(Ae.Screen,{name:"TaskDetailScreen",component:Be}))},Re=Object(d.a)(),Ue=function(e){e.navigation;return h.a.createElement(Re.Navigator,{headerMode:"none"},h.a.createElement(Re.Screen,{name:"LoginScreen",component:Ie}),h.a.createElement(Re.Screen,{name:"Details",component:Be}))},_e=n(399);n(267).a.ignoreLogs(["Setting a timer"]);var He=Object(d.a)();_e.init({dsn:"https://8e86145982584690aaa486750341de83@o968732.ingest.sentry.io/5920021",enableInExpoDevelopment:!0,debug:!0});t.a=function(){return h.a.createElement(m.a,null,h.a.createElement(He.Navigator,{mode:"modal",headerMode:"none"},h.a.createElement(He.Screen,{name:"Main",component:Fe}),h.a.createElement(He.Screen,{name:"MyModal",component:Ue})))}},412:function(e,t,n){e.exports=n(613)}},[[412,1,2]]]);
//# sourceMappingURL=app.59669242.chunk.js.map