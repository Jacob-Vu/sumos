{"version":3,"sources":["utils/Extensions.ts","firebase/config.ts","models/TaskItem.ts","stores/TaskStore.ts","stores/SelectTaskStore.ts","stores/StorageStore.ts","stores/RootStore.ts","components/TaskListItem.tsx","components/TodayTasks.tsx","components/KidReport.tsx","components/screens/HomeScreen.tsx","components/screens/TaskDetailScreen.tsx","components/screens/CameraScreen.tsx","components/screens/MainStack.tsx","components/screens/LoginScreen.tsx","components/screens/ModelStack.tsx","App.tsx"],"names":["Date","prototype","format","mm","this","getMonth","dd","getDate","getFullYear","join","String","toDate","items","split","fire","db","firebase","apps","length","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","storage","TaskItem","taskStore","id","task","cat","time","freqPerWeek","weekCount","attachments","isSelected","isCompleted","toggleComplete","makeAutoObservable","action","TaskStore","taskList","periodUserList","loading","loadTaskList","user","dateSl","a","async","collection","doc","get","userDoc","weekFromDate","addDays","getDay","weekToDate","loadSelectedDate","weekTaskList","selectedTasks","find","x","date","seconds","toLocaleDateString","docPath","taskDoc","data","exists","workList","listTask","map","v","selectedItem","taskId","reduce","acc","dayTask","fromTask","runInAction","push","console","log","loadUserPeriod","userList","fromDate","userDataList","forEach","item","dataDate","selected","completed","filter","userDt","dataDates","dateSelects","where","saveSelectList","filterTasks","ref","url","set","lastUpdate","migrate","orderBy","computed","SelectTaskStore","dateStr","selectDoc","doneDoc","newItems","doneTasks","includes","lastUpdated","observable","StorageStore","addAttachments","taskItem","file","path","getPlatformPath","value","name","getFileName","fileName","filePath","fileAttach","fetch","response","blob","child","put","taskUpload","getDownloadURL","Platform","OS","substring","indexOf","now","pop","uri","select","android","web","ios","getPlatformURI","imagePath","imgSource","isNaN","state","rootStore","selectTaskStore","storageStore","storesContext","React","createContext","useStores","useContext","styles","StyleSheet","create","baseText","fontSize","titleText","fontWeight","observer","props","navigation","useNavigation","route","useRoute","isFocused","useIsFocused","useEffect","params","photo","key","style","backgroundColor","flexDirection","TouchableWithoutFeedback","onPress","onSelectItem","color","attachItem","Image","source","width","height","marginLeft","justifyContent","alignContent","alignSelf","onValueChange","e","onDoneItem","transparent","FontAwesome","navigate","sourceScreen","takePicture","ImagePicker","granted","alert","result","cancelled","onAddFile","showImagePicker","marginBottom","useState","setDate","index","toggleSelect","SelectDay","val","ScrollView","marginTop","sortedTaskList","totalSelected","totalCompleted","i","size","title","HelloWorldApp","tabIndex","setTab","onChangeTab","heading","TodayTasks","container","image","flex","camera","buttonContainer","margin","button","alignItems","text","ModalScreen","hasPermission","setHasPermission","Camera","Constants","Type","back","type","setType","setPhoto","setCamera","requestPermissionsAsync","status","goBack","TouchableOpacity","front","takePictureAsync","marginRight","MainStack","createStackNavigator","MainStackScreen","Navigator","headerMode","Screen","component","HomeScreen","CameraScreen","TaskDetailScreen","LoginScreen","View","Text","Button","ModelStack","ModelStackScreen","RootStack","TaskApp","NavigationContainer","mode"],"mappings":"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","file":"static/js/app.7ca0155b.chunk.js","sourcesContent":["Date.prototype.format = function() {\r\n    var mm = this.getMonth() + 1; // getMonth() is zero-based\r\n    var dd = this.getDate();\r\n\r\n    return [(dd>9 ? \"\" : \"0\") + dd,(mm>9 ? \"\" : \"0\") + mm,this.getFullYear()\r\n           ].join(\"-\");\r\n};\r\n\r\nString.prototype.toDate = function() {\r\n    const items = this.split(\"-\");\r\n    return new Date(items[2],items[1] - 1,items[0]);\r\n};","import firebase from \"@firebase/app\";\r\nimport \"@firebase/auth\";\r\nimport \"@firebase/firestore\";\r\nimport \"@firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCZ1W91h5gI4Ys3K44apJMX-dfAzKmKOzc\",\r\n    authDomain: \"todo-app-594e8.firebaseapp.com\",\r\n    projectId: \"todo-app-594e8\",\r\n    storageBucket: \"todo-app-594e8.appspot.com\",\r\n    messagingSenderId: \"254618059037\",\r\n    appId: \"1:254618059037:web:2a162824c6e6dfd3d921f4\",\r\n    measurementId: \"G-84M73W8WLD\"\r\n};\r\n\r\nlet fire = null;\r\nif (!firebase.apps.length) {\r\n   fire = firebase.initializeApp(firebaseConfig);\r\n} else {\r\n   fire = firebase.app(); // if already initialized, use that one\r\n}\r\n\r\nexport const auth = fire.auth();\r\n\r\nexport const db = fire.firestore();\r\n\r\nexport const storage = fire.storage();\r\n\r\nexport default {fire};","import { observable, computed, action, makeAutoObservable } from \"mobx\";\r\nimport { TaskStore } from 'stores/TaskStore';\r\n\r\nexport default class TaskItem {\r\n    taskStore: TaskStore;\r\n    id;\r\n    cat;\r\n    freqPerWeek;\r\n    time;\r\n    task;\r\n    isSelected;\r\n    isCompleted;\r\n    weekCount;\r\n    attachments;\r\n\r\n    constructor(taskStore, id, task, cat, time, freqPerWeek,weekCount,attachments = [],isSelected = false, isCompleted = false) {\r\n\t\tthis.taskStore = taskStore;\r\n\t\tthis.id = id;\r\n        this.task = task;\r\n        this.cat = cat;\r\n        this.time = time;\r\n\t\tthis.freqPerWeek = freqPerWeek;\r\n        this.weekCount = weekCount;\r\n        this.isSelected = isSelected;\r\n        this.isCompleted = isCompleted;\r\n        this.attachments = attachments;\r\n        makeAutoObservable(this);\r\n\t}\r\n\r\n    @action toggleSelect = () => {\r\n        this.isSelected = !this.isSelected;\r\n    }\r\n\r\n    toggleComplete = () => {\r\n        this.isCompleted = !this.isCompleted;\r\n    }\r\n\r\n    static fromTask(taskStore,task,weekCount,attachments = [],isSelected = false, isCompleted = false){\r\n        return new TaskItem(taskStore,task.id, task.task, task.cat, task.time, task.freqPerWeek, weekCount,attachments, isSelected, isCompleted);\r\n    }\r\n}","import { addDays, format } from \"date-fns\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport { action, computed, makeAutoObservable, runInAction } from \"mobx\";\r\nimport { db, storage } from \"../firebase/config\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport \"../utils/Extensions\";\r\n\r\nclass TaskStore {\r\n  \r\n  taskList = [];\r\n  periodUserList = [];\r\n  loading = false;\r\n\r\n  constructor (){\r\n    console.log(\"Initialize TaskStore...\");\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  loadTaskList = async(user, dateSl) => {\r\n    this.loading = true;\r\n    const userDoc = await db.collection(\"todolist\").doc(\"default\").get();    \r\n\r\n    const weekFromDate = addDays(dateSl, dateSl.getDay() > 0? 1 -dateSl.getDay(): -6);\r\n    const weekToDate = addDays(dateSl, dateSl.getDay() > 0? 7 - dateSl.getDay(): 0);\r\n    const weekTaskList = await this.loadSelectedDate([user], weekFromDate, weekToDate);\r\n\r\n    let selectedTasks: [] = weekTaskList.find( x=> new Date(x.date.seconds*1000).toLocaleDateString() == dateSl.toLocaleDateString())?.selectedTasks;\r\n    if (!selectedTasks){\r\n      const docPath = `${user}_${format(dateSl, \"dd-MM-yyyy\")}`;\r\n      const taskDoc = await db.collection(\"selectlist\").doc(docPath).get();\r\n      selectedTasks = taskDoc.data()?.selectedTasks;\r\n    }\r\n\r\n    if (userDoc.exists && userDoc.data().workList) {\r\n      const listTask = userDoc.data().workList.map((v) => {\r\n        const selectedItem = selectedTasks?.find((x) => v.id == x.taskId);\r\n        const weekCount = weekTaskList.reduce((acc,dayTask) => {\r\n            if (dayTask.selectedTasks.find(x=> x.taskId == v.id)){\r\n                return acc += 1;\r\n            }\r\n            return acc;\r\n        },0);\r\n        return TaskItem.fromTask(\r\n          this,\r\n          v,\r\n          weekCount,\r\n          selectedItem?.attachments,\r\n          selectedItem != null,\r\n          selectedItem?.isCompleted\r\n        );\r\n      });\r\n      runInAction(()=>{\r\n        this.taskList = [];\r\n        this.taskList.push(...listTask);\r\n        this.loading = false;\r\n      })\r\n    } else {\r\n      console.log(\"No doc values found\");\r\n    }\r\n  }\r\n\r\n  loadUserPeriod = async (userList, fromDate, toDate) => {\r\n    let userDataList = [];\r\n    this.loading = true;\r\n    const taskList = await this.loadSelectedDate(userList, fromDate, toDate);\r\n    taskList.forEach(item => {\r\n      let dataDate = {\r\n        date: format(new Date(item.date.seconds*1000),'dd-MM-yyyy'),\r\n        selected: item.selectedTasks.length,\r\n        completed: item.selectedTasks.filter( x=>x.isCompleted).length\r\n      };\r\n      const userDt = userDataList.find(x=> x.user == item.user);\r\n      if (!userDt){\r\n        userDataList.push({\r\n          user: item.user,\r\n          dataDates: [dataDate]\r\n        })\r\n      } else {\r\n        userDt.dataDates.push(dataDate);\r\n      }\r\n    });\r\n    runInAction(()=>{\r\n      this.loading = false;\r\n      this.periodUserList = userDataList;\r\n    })\r\n  }\r\n\r\n  loadSelectedDate = async (userList, fromDate, toDate) => {\r\n    const dateSelects = [];\r\n    const querySnapshot = await db.collection(\"selectlist\")\r\n      .where(\"user\", \"in\", userList)\r\n      .where(\"date\", \">=\", fromDate)\r\n      .where(\"date\", \"<=\", toDate)\r\n      .get();\r\n    querySnapshot.forEach((doc) => {\r\n      dateSelects.push(doc.data());\r\n    });\r\n    return dateSelects;\r\n  }\r\n\r\n  saveSelectList = async (user, dateSl) => {\r\n    this.loading = true;\r\n    const docPath = `${user}_${format(dateSl, \"dd-MM-yyyy\")}`;\r\n    const filterTasks = this.taskList\r\n      .filter((x) => x.isSelected)\r\n      .map((task) => ({\r\n        taskId: task.id,\r\n        isCompleted: task.isCompleted,\r\n        attachments: task.attachments?.map(x=> ({\r\n          ref: x.ref,\r\n          url: x?.url\r\n        }))\r\n      }));\r\n    await db.collection(\"selectlist\").doc(docPath).set({\r\n      date: dateSl,\r\n      lastUpdate: new Date(),\r\n      user,\r\n      selectedTasks: filterTasks,\r\n    });\r\n    runInAction(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  @computed get sortedTaskList() {\r\n    return orderBy(this.taskList, [\"isSelected\", \"id\"], [\"desc\", \"asc\"]);\r\n  }\r\n\r\n  // can be called as `this.total`\r\n  @computed get totalCompleted() {\r\n    return this.taskList.filter((x) => x.isCompleted).length;\r\n  }\r\n\r\n  // can be called as `this.total`\r\n  @computed get totalSelected() {\r\n    return this.taskList.filter((x) => x.isSelected).length;\r\n  }\r\n\r\n  @action saveSelectTask(id) {\r\n\r\n  }\r\n\r\n  migrate = async() => {\r\n    db.collection(\"todolist\")\r\n      .doc(\"default\");\r\n  }\r\n}\r\n\r\nexport default TaskStore;\r\n","import { observable } from \"mobx\";\r\nimport { db } from \"../firebase/config\";\r\nimport \"../utils/Extensions\";\r\n\r\nclass SelectTaskStore {\r\n    @observable selectedTasks = [];\r\n\r\n    async migrateData(user,date){\r\n        const dateStr = date.format();\r\n        const selectDoc = await db.collection(\"selectlist\" + user).doc(dateStr).get();\r\n        const doneDoc = await db.collection(\"donelist\" + user).doc(dateStr).get();\r\n        let newItems = [];\r\n        let doneTasks  = [];\r\n        const docPath = `${user}_${dateStr}`;\r\n        if (doneDoc.exists && doneDoc.data().doneTasks) {\r\n            doneDoc.data().doneTasks.forEach(taskId => {\r\n              doneTasks.push(taskId);\r\n            });\r\n          }\r\n        if (selectDoc.exists && selectDoc.data().selectedTasks) {\r\n            selectDoc.data().selectedTasks.forEach(taskId => {\r\n                newItems.push({\r\n                    id: `${docPath}_${taskId}`,\r\n                    taskId: taskId,\r\n                    date: date,\r\n                    user,\r\n                    isCompleted: doneTasks.includes(taskId),\r\n                    attachments: []\r\n                });\r\n            });\r\n        }\r\n        db.collection(\"selectlist\").doc(docPath).set({\r\n            lastUpdated: new Date(),\r\n            selectedTasks: newItems\r\n        });\r\n    }\r\n}\r\n\r\nexport default SelectTaskStore;","import { addDays, format } from \"date-fns\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport { action, computed, makeAutoObservable, runInAction } from \"mobx\";\r\nimport { Platform } from \"react-native\";\r\nimport { db, storage } from \"../firebase/config\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport \"../utils/Extensions\";\r\n\r\nclass StorageStore {\r\n\r\n  loading = false;  \r\n\r\n  constructor () {\r\n    console.log(\"Initialize TaskStore...\");\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  addAttachments = async(taskItem,file) => {\r\n    this.loading = true;\r\n    let path = this.getPlatformPath(file).value;\r\n    let name = this.getFileName(file.fileName,path);\r\n    const filePath = \"attachFiles/\" + name;\r\n    runInAction(()=> {\r\n      const fileAttach = {value: path, ref: filePath};\r\n      taskItem.attachments.push(fileAttach);\r\n    });\r\n    const response = await fetch(path);\r\n    const blob = await response.blob();\r\n    \r\n    const ref = storage.ref().child(filePath);\r\n    const taskUpload = await ref.put(blob);\r\n\r\n    const url = await ref.getDownloadURL();\r\n    taskItem.attachments[taskItem.attachments.length - 1].url = url;\r\n    this.loading = false;\r\n    return taskUpload;\r\n  }\r\n\r\n  getFileName = (name, path) => {\r\n    if (name != null) { return name; }\r\n\r\n    if (Platform.OS === \"ios\") {\r\n        path = \"~\" + path.substring(path.indexOf(\"/Documents\"));\r\n    }\r\n    if (Platform.OS == \"web\") {\r\n      const date = new Date();\r\n      return format(date, \"yyMMdd_\") + Date.now() ;\r\n    }\r\n    return path.split(\"/\").pop();\r\n  }\r\n\r\n  /**\r\n   * Get platform specific value from response\r\n   */\r\n  getPlatformPath = ({ path, uri }) => {\r\n      return Platform.select({\r\n          android: {value: path },\r\n          web: {value: uri},\r\n          ios: {value: uri }\r\n      });\r\n  }\r\n\r\n  getPlatformURI = (imagePath) => {\r\n      let imgSource = imagePath;\r\n      if (isNaN(imagePath)) {\r\n          imgSource = { uri: this.state.imagePath };\r\n          if (Platform.OS == \"android\") {\r\n              imgSource.uri = \"file:///\" + imgSource.uri;\r\n          }\r\n      }\r\n      return imgSource;\r\n  }\r\n\r\n}\r\n\r\nexport default StorageStore;\r\n","import React from 'react';\r\nimport TaskStore from './TaskStore';\r\nimport SelectTaskStore from './SelectTaskStore';\r\nimport StorageStore from './StorageStore';\r\n\r\nclass RootStore {\r\n    taskStore: TaskStore;\r\n    selectTaskStore: ReportTaskStore;\r\n    storageStore: StorageStore;\r\n    constructor() {\r\n        this.taskStore = new TaskStore(this);\r\n        this.selectTaskStore = new SelectTaskStore(this);\r\n        this.storageStore = new StorageStore(this);\r\n    }\r\n}\r\n\r\nconst rootStore = new RootStore();\r\n\r\nexport default rootStore;\r\n\r\nconst storesContext = React.createContext({ ...rootStore });\r\nexport const useStores = () => React.useContext(storesContext);\r\n\r\n","import { Body, Button, ListItem, Right, Switch, Text, Spinner } from 'native-base';\r\nimport React, { useEffect } from \"react\";\r\nimport { Image, Platform, StyleSheet, TouchableWithoutFeedback, View } from \"react-native\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport { useNavigation, useRoute, useIsFocused  } from \"@react-navigation/native\";\r\nimport { useStores } from \"../stores/RootStore\";\r\nimport TaskItem from '../models/TaskItem';\r\nimport { FontAwesome } from '@expo/vector-icons';\r\n\r\n\r\nconst TaskListItem = (props) => {\r\n  const taskItem: TaskItem = props.taskItem;\r\n  const navigation = useNavigation();\r\n  const route = useRoute();\r\n  const {taskStore, storageStore} = useStores();\r\n  const isFocused = useIsFocused();\r\n\r\n  useEffect(() => {\r\n    if (isFocused && route.params?.photo && route.params.id == taskItem.id) {\r\n      storageStore.addAttachments(taskItem, route.params.photo);\r\n    }\r\n  }, [route.params?.id]);\r\n\r\n  const showImagePicker = async (taskItem) => {\r\n    // ask the user for the permission to access the media library\r\n    const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n\r\n    if (permissionResult.granted === false) {\r\n      alert(\"You've refused to allow this appp to access your photos!\");\r\n      return;\r\n    }\r\n\r\n    const result = await ImagePicker.launchImageLibraryAsync();\r\n\r\n    if (result.cancelled) {\r\n      console.log(\"User cancelled image picker\");\r\n    } else {\r\n      storageStore.addAttachments(taskItem, result);\r\n      if (props.onAddFile){\r\n        props.onAddFile();\r\n      }\r\n    }\r\n  };\r\n  \r\n  \r\n  const takePicture = (taskItem) => {\r\n    navigation.navigate(\"CameraScreen\",{ sourceScreen: \"HomeScreen\", id:  taskItem.id });\r\n  };\r\n  const attachments = (taskItem) => {\r\n    return taskItem.attachments.map(attachItem => (\r\n      <Image source={{uri: attachItem.value?? attachItem.url}} style={{width: 50,height: 50, marginLeft: 20}}></Image>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <ListItem key={taskItem.id} style={{ backgroundColor: taskItem.isSelected? \"#cde1f9\": \"#fcfcfc\"}}>\r\n      <Body style={{flexDirection: \"row\"}}>\r\n        <View>\r\n          <TouchableWithoutFeedback onPress={() => props.onSelectItem(taskItem)}>\r\n            <View>\r\n              <Text style={styles.titleText}>{taskItem.id}. {taskItem.task}</Text>\r\n              <Text style={styles.baseText}>Mục: {taskItem.cat} </Text>\r\n              { taskItem.weekCount > 0 ?\r\n              <Text style={{fontSize: 13,color: taskItem.weekCount > taskItem.freqPerWeek? \"red\": \"\"}}>Đã chọn: {taskItem.weekCount} lần\r\n                (Được chọn {taskItem.freqPerWeek} lần) </Text>\r\n              : <Text style={{fontSize: 13}}>Được chọn {taskItem.freqPerWeek} lần </Text> }\r\n            </View>\r\n          </TouchableWithoutFeedback>\r\n        </View>\r\n        <View style={{flexDirection: \"row\"}}>\r\n        {\r\n          attachments(taskItem)\r\n        }\r\n        {\r\n          storageStore.loading && route.params?.id == taskItem.id && <View><Spinner/><Text>Đang tải ảnh lên... </Text></View>\r\n        }\r\n        </View>\r\n      </Body>\r\n      { taskItem.isSelected &&\r\n      <Right style={{flexDirection: \"row\", justifyContent: \"space-around\", alignContent: \"center\"}}>          \r\n          <Switch style={{alignSelf: \"center\"}} value={taskItem.isCompleted} onValueChange={(e)=> { props.onDoneItem(taskItem);}}  />          \r\n          <Button transparent>\r\n              <FontAwesome name=\"comment\" style={{fontSize:25}} color=\"rgb(63, 81, 181)\" />\r\n          </Button>\r\n          <Button transparent onPress={() => takePicture(taskItem)} >\r\n              <FontAwesome style={{fontSize:25}} name=\"camera\" color=\"rgb(63, 81, 181)\" />\r\n          </Button>\r\n          <Button transparent onPress={() => showImagePicker(taskItem)}>\r\n              <FontAwesome style={{fontSize:25}} name=\"forward\" color=\"rgb(63, 81, 181)\" />\r\n          </Button>\r\n      </Right>\r\n      }\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  baseText: {\r\n    fontSize: 11,\r\n  },\r\n  titleText: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\"\r\n  }\r\n});\r\n\r\n\r\nexport default observer(TaskListItem);","import { FontAwesome } from \"@expo/vector-icons\";\r\nimport { addDays, format } from \"date-fns\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { Button, List, Spinner, Text } from \"native-base\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { ScrollView, StyleSheet, View } from \"react-native\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport { useStores } from \"../stores/RootStore\";\r\nimport TaskListItem from \"./TaskListItem\";\r\n\r\n\r\nconst TodayTasksScreen = (props) => {\r\n  const [dateSl,setDate] = useState(new Date());\r\n  const { taskStore } = useStores();\r\n\r\n  useEffect(()=> {\r\n    taskStore.loadTaskList(props.user,dateSl);\r\n  },[props.index, props.user,dateSl]);\r\n\r\n  const onSelectItem = (task: TaskItem) => {\r\n    task.toggleSelect();\r\n    taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const SaveSelectList = async() => {\r\n    await taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const onDoneItem = (task: TaskItem) => {\r\n    task.toggleComplete();\r\n    taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const onAddFile = (e) => {\r\n    taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const SelectDay = (val) => {\r\n    setDate(addDays(dateSl, val));\r\n  };\r\n\r\n  return (\r\n     <ScrollView>\r\n        <View style={{flexDirection: \"column\"}}>\r\n          <View style={{flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 20, marginBottom: 20 }}>\r\n              <Button transparent onPress={()=> SelectDay(-1)}>\r\n                <FontAwesome style={{fontSize:35}} name=\"backward\" color=\"rgb(33, 150, 243)\" />\r\n             </Button>\r\n             <View style={{flexDirection: \"row\", justifyContent: 'center'}}>\r\n              <Text style={{fontSize: 18,fontWeight: \"bold\", color: \"red\"}} > {format(dateSl,\"iiii, dd-MM-yyyy\")} </Text>\r\n              {taskStore.loading && <Spinner style={{height: 35}}/>}\r\n             </View>\r\n             <Button transparent onPress={()=> SelectDay(1)}>\r\n             <FontAwesome style={{fontSize:35}} name=\"forward\" color=\"rgb(33, 150, 243)\" />\r\n             </Button>\r\n          </View>\r\n        </View>\r\n        {taskStore.sortedTaskList.length > 0 &&\r\n        (\r\n          <View style={{flexDirection: \"column\"}}>\r\n            <Text style={styles.result} >\r\n              {props.user} đã chọn {taskStore.totalSelected} việc. {\"\\r\\n\"}Đã hoàn thành: {taskStore.totalCompleted} việc</Text>\r\n            <Text style={{ fontSize: 18, fontWeight: \"bold\", marginLeft: 15, marginBottom: 20}}>Danh sách công việc: </Text>\r\n            <List>\r\n            {\r\n              taskStore.sortedTaskList.map((taskItem, i) => (\r\n                <TaskListItem key={taskItem.id} taskItem={taskItem} onSelectItem={onSelectItem} onDoneItem={onDoneItem} onAddFile={onAddFile} {...props} />\r\n              ))\r\n            }\r\n            </List>\r\n          </View>\r\n        )}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({  \r\n  result: {\r\n    marginLeft: \"10px\",\r\n    marginBottom: 20,\r\n    fontSize: 22,\r\n    fontWeight: \"bold\",\r\n    color: \"red\"\r\n  }\r\n});\r\n\r\n\r\nexport default observer(TodayTasksScreen);","import { addDays } from \"date-fns\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { List, ListItem, Spinner, Text } from \"native-base\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, ScrollView, StyleSheet, View } from \"react-native\";\r\nimport TaskItem from \"../models/TaskItem\";\r\nimport { useStores } from \"../stores/RootStore\";\r\n\r\n\r\nconst KidReport = (props) => {\r\n  const [dateSl,setDate] = useState(new Date());\r\n  const { taskStore } = useStores();\r\n\r\n  useEffect(()=> {\r\n    const weekFromDate = addDays(dateSl, dateSl.getDay() > 0? 1 -dateSl.getDay(): -6);\r\n    const weekToDate = addDays(dateSl, dateSl.getDay() > 0? 7 - dateSl.getDay(): 0);\r\n    taskStore.loadUserPeriod([\"Susu\",\"Nemo\"], weekFromDate, weekToDate);\r\n  },[]);\r\n\r\n  const onSelectItem = (task: TaskItem) => {\r\n    task.toggleSelect();\r\n  };\r\n\r\n  const SaveSelectList = async() => {\r\n    await taskStore.saveSelectList(props.user,dateSl);\r\n  };\r\n\r\n  const onDoneItem = (task: TaskItem) => {\r\n    task.toggleComplete();\r\n  };\r\n\r\n  const SelectDay = (val) => {\r\n    setDate(addDays(dateSl, val));\r\n  };\r\n\r\n  return (\r\n     <ScrollView>\r\n        <View style={{flexDirection: \"column\"}}>\r\n          <View style={{flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 20, marginBottom: 20 }}>\r\n             <Button style={{size: \"\"}} title=\"<< Hôm qua\" onPress={()=> SelectDay(-1)}/>\r\n             <Button style={{size: \"\"}} title=\"Lưu việc đã chọn\" onPress={()=> SaveSelectList()}></Button>\r\n             <Button style={{size: \"\"}} title=\"Hôm sau >>\" onPress={()=> SelectDay(1)}/>\r\n          </View>\r\n        </View>\r\n        {taskStore.loading ? (<Spinner/> ):\r\n        (\r\n          <View style={{flexDirection: \"column\"}}>\r\n              {taskStore.periodUserList.map(item => \r\n                (<View>\r\n                    <Text style={{fontSize: 20}}> {item.user} </Text>\r\n                    <List>\r\n                      {\r\n                        item.dataDates.map(date=>(\r\n                          <ListItem>\r\n                            <Text> Ngày: {date.date}</Text>\r\n                            <Text> Đăng ký: {date.selected}</Text>\r\n                            <Text style={{fontSize: 18, color: date.selected > date.completed? 'red': 'black'}}> Hoàn thành: {date.completed}</Text>\r\n                          </ListItem>\r\n                        ))\r\n                      }\r\n                    </List>\r\n                </View>)\r\n              )}\r\n          </View>\r\n        )}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  result: {\r\n    marginLeft: \"10px\",\r\n    marginBottom: 20,\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"red\"\r\n  }\r\n});\r\n\r\n\r\nexport default observer(KidReport);","import \"react-native-gesture-handler\";\r\nimport { Body, Button, Container, Header, Icon, Left, Right, Tab, Tabs, Title } from \"native-base\";\r\nimport React, { useState } from \"react\";\r\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\r\nimport TodayTasksScreen from \"components/TodayTasks\";\r\nimport { ScrollView } from \"react-native\";\r\nimport KidReport from \"@components/KidReport\";\r\n\r\nconst HelloWorldApp = (props) => {\r\n\r\n  const [tabIndex,setTab] = useState(0);\r\n  const tabChanged = (e)=> {\r\n    console.log(e);\r\n    setTab(e.i);\r\n  };\r\n\r\n  return (\r\n    <SafeAreaProvider>\r\n      <Container>\r\n        <ScrollView>\r\n        <Header>\r\n          <Left>\r\n            <Button transparent>\r\n              <Icon name=\"menu\" />\r\n            </Button>\r\n          </Left>\r\n          <Body>\r\n            <Title>SUMO DAYS</Title>\r\n          </Body>\r\n          <Right>\r\n            <Button transparent>\r\n            <Icon name=\"arrow-back\" />\r\n            </Button>\r\n          </Right>\r\n        </Header>\r\n        <Tabs onChangeTab={tabChanged}>\r\n          <Tab heading=\"Susu\">\r\n            <TodayTasksScreen index={tabIndex} user=\"Susu\"/>\r\n          </Tab>\r\n          <Tab heading=\"Nemo\">\r\n          <TodayTasksScreen index={tabIndex} user=\"Nemo\"/>\r\n          </Tab>\r\n          <Tab heading=\"Dad\">\r\n            <KidReport index={tabIndex}></KidReport>\r\n          </Tab>\r\n        </Tabs>\r\n        </ScrollView>\r\n      </Container>\r\n    </SafeAreaProvider>\r\n  );\r\n};\r\nexport default HelloWorldApp;","import \"react-native-gesture-handler\";\r\nimport { Body, Button, Container, Header, Icon, Left, Right, Tab, Tabs, Title, View } from \"native-base\";\r\nimport React, { useState } from \"react\";\r\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\r\nimport TodayTasksScreen from \"components/TodayTasks\";\r\n\r\nconst HelloWorldApp = () => {\r\n\r\n  const [tabIndex,setTab] = useState(0);\r\n  const tabChanged = (e)=> {\r\n    console.log(e);\r\n    setTab(e.i);\r\n  };\r\n\r\n  return (\r\n    <View>Detail</View>\r\n  );\r\n};\r\nexport default HelloWorldApp;","import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View, TouchableOpacity, Image } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\nimport { Button, Icon } from 'native-base';\r\nimport { useRoute } from '@react-navigation/native';\r\n\r\nconst ModalScreen = ({ navigation }) => {\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [type, setType] = useState(Camera.Constants.Type.back);\r\n  const route = useRoute();\r\n  const [photo,setPhoto] = useState();\r\n  const [camera,setCamera] = useState();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestPermissionsAsync();\r\n      setHasPermission(status === 'granted');\r\n    })();\r\n  }, []);\r\n\r\n  if (hasPermission === null) {\r\n    return <View />;\r\n  }\r\n  if (hasPermission === false) {\r\n    return <Text>No access to camera</Text>;\r\n  }\r\n\r\n  const snap = async()=>{\r\n    if (camera) {\r\n      let photo = await camera.takePictureAsync();\r\n      setPhoto(photo);\r\n    }\r\n  };\r\n\r\n  const goBack = () => {\r\n    navigation.navigate(route.params.sourceScreen,{\r\n      photo: photo,\r\n      sourceScreen: 'CameraScreen',\r\n      id: route.params?.id\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {!photo &&\r\n      (<Camera style={styles.camera} type={type} ref={ref=>{\r\n          setCamera(ref);\r\n        }}>\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity\r\n            style={styles.button}\r\n            onPress={() => {\r\n              setType(\r\n                type === Camera.Constants.Type.back\r\n                  ? Camera.Constants.Type.front\r\n                  : Camera.Constants.Type.back\r\n              );\r\n            }}>\r\n            <View style={{ flex:1, flexDirection: 'row', justifyContent: 'space-around', alignContent: 'center', marginLeft: 20}}>\r\n              <Text style={styles.text}> Camera sau </Text>\r\n              <Text style={styles.text} onPress={snap}> Chụp ảnh </Text>\r\n              <Button transparent style={{marginRight: 20}} onPress={goBack}>\r\n                <Icon name=\"arrow-back\" />\r\n            </Button>\r\n          </View>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </Camera>\r\n      )}\r\n      {photo && \r\n        <View style={{ flex:1, flexDirection: 'column', justifyContent: 'space-around', alignContent: 'center', marginLeft: 20}}>\r\n          <Image source={{uri: photo.uri}} style={styles.image}>\r\n          </Image>\r\n          <View style={{flexDirection: \"row\", justifyContent: 'space-around', alignContent: 'center'}}>            \r\n            <Button onPress={()=>{setPhoto(null)}}>\r\n                <Text style={{fontSize: 18}}> Chụp lại </Text>\r\n            </Button>            \r\n            <Button onPress={goBack}>\r\n                <Text style={{fontSize: 18}}> Tải ảnh </Text>\r\n            </Button>\r\n          </View>\r\n        </View>\r\n      }\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    alignSelf: 'center',\r\n    width: 640,\r\n    height: 480\r\n  },\r\n  image: {\r\n    flex: 1,\r\n    width: 640,\r\n    height: 480\r\n  },\r\n  camera: {\r\n    flex: 1\r\n  },\r\n  buttonContainer: {\r\n    flex: 1,\r\n    backgroundColor: 'transparent',\r\n    flexDirection: 'row',\r\n    margin: 20,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    alignSelf: 'flex-end',\r\n    alignItems: 'center',\r\n  },\r\n  text: {\r\n    fontSize: 18,\r\n    marginLeft: 20,\r\n    color: 'white',\r\n  },\r\n});\r\n\r\n  \r\nexport default ModalScreen;","import { createStackNavigator } from '@react-navigation/stack';\r\nimport HomeScreen from \"@components/screens/HomeScreen\";\r\nimport React from \"react\";\r\nimport TaskDetailScreen from \"@components/screens/TaskDetailScreen\";\r\nimport CameraScreen from '@components/screens/CameraScreen';\r\n\r\nconst MainStack = createStackNavigator();\r\n\r\nconst MainStackScreen = ({navigation}) => {\r\n    return (\r\n      <MainStack.Navigator headerMode=\"none\">\r\n        <MainStack.Screen name=\"HomeScreen\" component={HomeScreen} />\r\n        <MainStack.Screen name=\"CameraScreen\" component={CameraScreen} />\r\n        <MainStack.Screen name=\"TaskDetailScreen\" component={TaskDetailScreen} />\r\n      </MainStack.Navigator>\r\n    );\r\n}\r\n\r\nexport default MainStackScreen;","import React from \"react\";\r\n\r\nconst LoginScreen = ({ navigation }) => {\r\n    return (\r\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\r\n        <Text style={{ fontSize: 30 }}>This is a modal!</Text>\r\n        <Button onPress={() => navigation.goBack()} title=\"Dismiss\" />\r\n      </View>\r\n    );\r\n}\r\n\r\nexport default LoginScreen;\r\n  ","import { createStackNavigator } from '@react-navigation/stack';\r\nimport Home from \"components/screens/Home\";\r\nimport React from \"react\";\r\nimport TaskDetailScreen from \"components/screens/TaskDetailScreen\";\r\nimport LoginScreen from './LoginScreen';\r\n\r\nconst ModelStack = createStackNavigator();\r\n\r\nconst ModelStackScreen = ({navigation}) => {\r\n    return (\r\n      <ModelStack.Navigator headerMode=\"none\">\r\n        <ModelStack.Screen name=\"LoginScreen\" component={LoginScreen} />        \r\n        <ModelStack.Screen name=\"Details\" component={TaskDetailScreen} />\r\n      </ModelStack.Navigator>\r\n    );\r\n}\r\n\r\nexport default ModelStackScreen;","import \"react-native-gesture-handler\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from '@react-navigation/stack';\nimport React from \"react\";\nimport MainStack from \"@components/screens/MainStack\";\nimport ModelStackScreen from '@components/screens/ModelStack';\n\nconst RootStack = createStackNavigator();\n\nconst TaskApp = () => {\n  return (\n    <NavigationContainer>\n      <RootStack.Navigator mode=\"modal\" headerMode=\"none\">\n        <RootStack.Screen name=\"Main\" component={MainStack} />\n        <RootStack.Screen name=\"MyModal\" component={ModelStackScreen} />\n      </RootStack.Navigator>\n    </NavigationContainer>\n  );\n};\nexport default TaskApp;"],"sourceRoot":""}