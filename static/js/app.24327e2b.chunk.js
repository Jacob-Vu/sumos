(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{259:function(e,t){Date.prototype.format=function(){var e=this.getMonth()+1,t=this.getDate();return[(t>9?"":"0")+t,(e>9?"":"0")+e,this.getFullYear()].join("-")},String.prototype.toDate=function(){var e=this.split("-");return new Date(e[2],e[1]-1,e[0])}},300:function(e,t,n){"use strict";var a,r,s,o,c,l=n(62),i=n.n(l),u=n(30),d=n(0),p=n.n(d),f=n(46),m=n(507),h=n(10),y=n.n(h),g=n(505),k=n(506),b=n(164),v=n(87),w=n(5),S=n(4),E=n(11),T=n.n(E),x=n(16),O=n.n(x),D=n(37),j=n.n(D),P=n(18),C=n.n(P),L=n(65),I=n.n(L),z=n(299),M=n.n(z),W=n(31),B=n(15),q=(n(491),n(498),null),N=((q=B.a.apps.length?B.a.app():B.a.initializeApp({apiKey:"AIzaSyCZ1W91h5gI4Ys3K44apJMX-dfAzKmKOzc",authDomain:"todo-app-594e8.firebaseapp.com",projectId:"todo-app-594e8",storageBucket:"todo-app-594e8.appspot.com",messagingSenderId:"254618059037",appId:"1:254618059037:web:2a162824c6e6dfd3d921f4",measurementId:"G-84M73W8WLD"})).auth(),q.firestore()),_=n(163),A=n.n(_),K=(n(258),a=function(){function e(t,n,a,s,o,c,l){var i=this,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],d=arguments.length>8&&void 0!==arguments[8]&&arguments[8];O()(this,e),A()(this,"toggleSelect",r,this),this.toggleComplete=function(){i.isCompleted=!i.isCompleted},this.taskStore=t,this.id=n,this.task=a,this.cat=s,this.time=o,this.freqPerWeek=c,this.weekCount=l,this.isSelected=u,this.isCompleted=d,Object(W.f)(this)}return C()(e,null,[{key:"fromTask",value:function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new e(t,n.id,n.task,n.cat,n.time,n.freqPerWeek,a,r,s)}}]),e}(),r=I()(a.prototype,"toggleSelect",[W.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isSelected=!e.isSelected}}}),a),H=(n(259),s=function(){function e(){var t=this;O()(this,e),this.taskList=[],this.loading=!1,this.loadTaskList=function(e,n){var a,r,s,o,c,l,i,u,d,p;return y.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return t.loading=!0,t.taskList=[],f.next=4,y.a.awrap(N.collection("todolist").doc("default").get());case 4:return r=f.sent,s=Object(g.a)(n,n.getDay()>0?1-n.getDay():-6),o=Object(g.a)(n,n.getDay()>0?7-n.getDay():0),f.next=9,y.a.awrap(t.loadSelectedDate([e],s,o));case 9:if(c=f.sent,l=null==(a=c.find((function(e){return new Date(1e3*e.date.seconds).toLocaleDateString()==n.toLocaleDateString()})))?void 0:a.selectedTasks){f.next=17;break}return u=e+"_"+Object(k.a)(n,"dd-MM-yyyy"),f.next=15,y.a.awrap(N.collection("selectlist").doc(u).get());case 15:d=f.sent,l=null==(i=d.data())?void 0:i.selectedTasks;case 17:r.exists&&r.data().workList?(p=r.data().workList.map((function(e){var n,a=null==(n=l)?void 0:n.find((function(t){return e.id==t.taskId})),r=c.reduce((function(t,n){return n.selectedTasks.find((function(t){return t.taskId==e.id}))?t+1:t}),0);return K.fromTask(t,e,r,null!=a,null==a?void 0:a.isCompleted)})),Object(W.i)((function(){var e;(e=t.taskList).push.apply(e,j()(p)),t.loading=!1}))):console.log("No doc values found");case 18:case"end":return f.stop()}}),null,null,null,Promise)},this.loadSelectedDate=function(e,t,n){var a;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=[],r.next=3,y.a.awrap(N.collection("selectlist").where("user","in",e).where("date",">=",t).where("date","<=",n).get());case 3:return r.sent.forEach((function(e){a.push(e.data())})),r.abrupt("return",a);case 6:case"end":return r.stop()}}),null,null,null,Promise)},this.saveSelectList=function(e,n){var a,r;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=e+"_"+Object(k.a)(n,"dd-MM-yyyy"),r=t.taskList.filter((function(e){return e.isSelected})).map((function(e){return{taskId:e.id,isCompleted:e.isCompleted}})),s.next=4,y.a.awrap(N.collection("selectlist").doc(a).set({date:n,lastUpdate:new Date,user:e,selectedTasks:r}));case 4:return s.abrupt("return",s.sent);case 5:case"end":return s.stop()}}),null,null,null,Promise)},this.migrate=function(){return y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:N.collection("todolist").doc("default");case 1:case"end":return e.stop()}}),null,null,null,Promise)},console.log("Initialize TaskStore..."),Object(W.f)(this)}return C()(e,[{key:"sortedTaskList",get:function(){return M()(this.taskList,["isSelected","id"],["desc","asc"])}},{key:"totalCompleted",get:function(){return this.taskList.filter((function(e){return e.isCompleted})).length}},{key:"totalSelected",get:function(){return this.taskList.filter((function(e){return e.isSelected})).length}},{key:"saveSelectTask",value:function(e){}}]),e}(),I()(s.prototype,"sortedTaskList",[W.c],Object.getOwnPropertyDescriptor(s.prototype,"sortedTaskList"),s.prototype),I()(s.prototype,"totalCompleted",[W.c],Object.getOwnPropertyDescriptor(s.prototype,"totalCompleted"),s.prototype),I()(s.prototype,"totalSelected",[W.c],Object.getOwnPropertyDescriptor(s.prototype,"totalSelected"),s.prototype),I()(s.prototype,"saveSelectTask",[W.b],Object.getOwnPropertyDescriptor(s.prototype,"saveSelectTask"),s.prototype),s),J=(o=function(){function e(){O()(this,e),A()(this,"selectedTasks",c,this)}return C()(e,[{key:"migrateData",value:function(e,t){var n,a,r,s,o,c;return y.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=t.format(),l.next=3,y.a.awrap(N.collection("selectlist"+e).doc(n).get());case 3:return a=l.sent,l.next=6,y.a.awrap(N.collection("donelist"+e).doc(n).get());case 6:r=l.sent,s=[],o=[],c=e+"_"+n,r.exists&&r.data().doneTasks&&r.data().doneTasks.forEach((function(e){o.push(e)})),a.exists&&a.data().selectedTasks&&a.data().selectedTasks.forEach((function(n){s.push({id:c+"_"+n,taskId:n,date:t,user:e,isCompleted:o.includes(n),attachments:[]})})),N.collection("selectlist").doc(c).set({lastUpdated:new Date,selectedTasks:s});case 13:case"end":return l.stop()}}),null,null,null,Promise)}},{key:"loadSelectTasks",value:function(e,t){var n,a,r=this;return y.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=e+"_"+t,s.next=3,y.a.awrap(N.collection("selectlist").doc(n).get());case 3:(a=s.sent).exists&&a.data().selectedTasks?a.data().selectedTasks.forEach((function(e){r.selectedTasks.push(e)})):console.log("No doc values found");case 5:case"end":return s.stop()}}),null,null,null,Promise)}}]),e}(),c=I()(o.prototype,"selectedTasks",[W.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o);new J;function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Y=new function e(){O()(this,e),this.taskStore=new H(this),this.selectTaskStore=new J(this)},R=p.a.createContext(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Y)),F=n(123),G=w.a.create({baseText:{fontSize:11},titleText:{fontSize:15,fontWeight:"bold"}}),V=Object(b.a)((function(e){var t=e.taskItem;return p.a.createElement(u.ListItem,{key:t.id,bottomDivider:!0,style:{backgroundColor:t.isSelected?"#cde1f9":"#fcfcfc"}},p.a.createElement(u.Body,null,p.a.createElement(S.a,null,p.a.createElement(F.a,{onPress:function(){return e.onSelectItem(t)}},p.a.createElement(S.a,null,p.a.createElement(u.Text,{style:G.titleText},t.id,". ",t.task),p.a.createElement(u.Text,{style:G.baseText},"M\u1ee5c: ",t.cat," "),t.weekCount>0?p.a.createElement(u.Text,{style:{fontSize:13,color:t.weekCount>t.freqPerWeek?"red":""}},"\u0110\xe3 ch\u1ecdn: ",t.weekCount," l\u1ea7n (\u0110\u01b0\u1ee3c ch\u1ecdn ",t.freqPerWeek," l\u1ea7n) "):p.a.createElement(u.Text,{style:{fontSize:13}},"\u0110\u01b0\u1ee3c ch\u1ecdn ",t.freqPerWeek," l\u1ea7n "))))),p.a.createElement(u.Right,null,t.isSelected&&p.a.createElement(u.Switch,{value:t.isCompleted,onValueChange:function(n){e.onDoneItem(t)}})))})),X=w.a.create({result:{marginLeft:"10px",marginBottom:20,fontSize:18,fontWeight:"bold",color:"red"}}),Z=Object(b.a)((function(e){var t=Object(d.useState)(new Date),n=i()(t,2),a=n[0],r=n[1],s=p.a.useContext(R).taskStore;Object(d.useEffect)((function(){s.loadTaskList(e.user,a)}),[e.index,e.user,a]);var o=function(e){e.toggleSelect()},c=function(e){e.toggleComplete()},l=function(e){r(Object(g.a)(a,e))};return p.a.createElement(f.a,null,p.a.createElement(S.a,{style:{flexDirection:"column"}},p.a.createElement(S.a,{style:{flexDirection:"row",justifyContent:"space-around",marginTop:20,marginBottom:20}},p.a.createElement(v.a,{style:{size:""},title:"<< H\xf4m qua",onPress:function(){return l(-1)}}),p.a.createElement(v.a,{style:{size:""},title:"L\u01b0u vi\u1ec7c \u0111\xe3 ch\u1ecdn",onPress:function(){return y.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.awrap(s.saveSelectList(e.user,a));case 2:case"end":return t.stop()}}),null,null,null,Promise)}}),p.a.createElement(v.a,{style:{size:""},title:"H\xf4m sau >>",onPress:function(){return l(1)}}))),s.loading?p.a.createElement(u.Spinner,null):p.a.createElement(S.a,{style:{flexDirection:"column"}},p.a.createElement(u.Text,{style:X.result}," Ng\xe0y ",Object(k.a)(a,"dd-MM-yyyy"),",",e.user," \u0111\xe3 ch\u1ecdn ",s.totalSelected," vi\u1ec7c. ","\r\n"," \u0110\xe3 ho\xe0n th\xe0nh: ",s.totalCompleted," vi\u1ec7c"),p.a.createElement(u.Text,{style:{fontSize:18,fontWeight:"bold",marginLeft:15,marginBottom:20}},"Danh s\xe1ch c\xf4ng vi\u1ec7c: "),p.a.createElement(u.List,null,s.sortedTaskList.map((function(e,t){return p.a.createElement(V,{key:e.id,taskItem:e,onSelectItem:o,onDoneItem:c})})))))}));t.a=function(){var e=Object(d.useState)(0),t=i()(e,2),n=t[0],a=t[1];return p.a.createElement(m.a,null,p.a.createElement(f.a,null,p.a.createElement(u.Container,null,p.a.createElement(u.Header,null,p.a.createElement(u.Left,null,p.a.createElement(u.Button,{transparent:!0},p.a.createElement(u.Icon,{name:"menu"}))),p.a.createElement(u.Body,null,p.a.createElement(u.Title,null,"SUMO DAYS")),p.a.createElement(u.Right,null,p.a.createElement(u.Button,{transparent:!0},p.a.createElement(u.Icon,{name:"arrow-back"})))),p.a.createElement(u.Tabs,{onChangeTab:function(e){console.log(e),a(e.i)}},p.a.createElement(u.Tab,{heading:"Susu"},p.a.createElement(Z,{index:n,user:"Susu"})),p.a.createElement(u.Tab,{heading:"Nemo"},p.a.createElement(Z,{index:n,user:"Nemo"})),p.a.createElement(u.Tab,{heading:"Dad"},p.a.createElement(Z,{index:n,user:"Dad"}))))))}},303:function(e,t,n){e.exports=n(494)}},[[303,1,2]]]);
//# sourceMappingURL=app.24327e2b.chunk.js.map